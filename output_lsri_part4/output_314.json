{
  "application_domain": [
    {
      "confidence": 26.77,
      "result": {
        "type": "String",
        "value": "Computer Vision"
      },
      "technique": "supervised_classification"
    }
  ],
  "code_repository": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/HKU-BAL/Clair"
      },
      "technique": "GitHub_API"
    }
  ],
  "date_created": [
    {
      "confidence": 1,
      "result": {
        "type": "Date",
        "value": "2019-03-11T10:23:53Z"
      },
      "technique": "GitHub_API"
    }
  ],
  "date_updated": [
    {
      "confidence": 1,
      "result": {
        "type": "Date",
        "value": "2024-10-01T14:42:48Z"
      },
      "technique": "GitHub_API"
    }
  ],
  "description": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "Clair: Exploring the limit of using deep neural network on pileup data for germline variant calling"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Introduction",
        "parent_header": [
          "Clair - deep neural network based variant caller"
        ],
        "type": "Text_excerpt",
        "value": "Clair3 released in May 2021 is the successor of Clair, please try out Clair3 at [https://github.com/HKU-BAL/Clair3](https://github.com/HKU-BAL/Clair3).\n\nSingle-molecule sequencing technologies have emerged in recent years and revolutionized structural variant calling, complex genome assembly, and epigenetic mark detection. However, the lack of a highly accurate small variant caller has limited the new technologies from being more widely used. In this study, we present Clair, the successor to Clairvoyante, a program for fast and accurate germline small variant calling, using single molecule sequencing data. For ONT data, Clair achieves the best precision, recall and speed as compared to several competing programs, including Clairvoyante, Longshot and Medaka. Through studying the missed variants and benchmarking intentionally overfitted models, we found that Clair may be approaching the limit of possible accuracy for germline small variant calling using pileup data and deep neural networks.\n\nThis is the formal release of Clair (Clair v2, Dec 2019). You can find the experimental Clair v1 (Jan 2019) at [https://github.com/aquaskyline/Clair](https://github.com/aquaskyline/Clair). The preprint of Clair v2 is available in [bioRxiv](https://www.biorxiv.org/content/10.1101/865782v2).\n\n---\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Submodule Descriptions",
        "parent_header": [
          "Clair - deep neural network based variant caller"
        ],
        "type": "Text_excerpt",
        "value": "Submodules in __`clair/`__ are for variant calling and model training. Submodules in __`dataPrepScripts`__ are for data preparation.\n\n*For the submodules listed below, you use the `-h` or `--help` option for available options.*\n\n`clair/` | Note: submodules under this folder are Pypy incompatible, please run using Python\n---: | ---\n`call_var` | Call variants using candidate variant tensors.\n`callVarBam` | Call variants directly from a BAM file.\n`callVarBamParallel` | Generate `callVarBam` commands that can be run in parallel. A BED file is required to specify the regions for variant calling. `--refChunkSize` set the genome chuck size per job.\n`evaluate` | Evaluate a model.\n`plot_tensor` | Create high resolution PNG figures to visualize input tensor.\n`train` |  Training a model using adaptive learning rate decay. By default, the learning rate will decay for three times. Input a binary tensors file created by `Tensor2Bin` is highly recommended.\n`train_clr` | Training a model using Cyclical Learning Rate (CLR).\n\n\n`dataPrepScripts/` | Note: submodules under this folder is Pypy compatiable unless specified.\n---: | ---\n`ExtractVariantCandidates`| Extract the position of variant candidates.<br>Input: BAM; Reference FASTA.<br>_Important option(s):<br>`--threshold` \"Minimum alternative allele frequency to report a candidate\"<br>`--minCoverage` \"Minimum coverage to report a candidate\"_\n`GetTruth`| Extract the variants from a truth VCF. Input: VCF; Reference FASTA if the vcf contains asterisks in ALT field.\n`CreateTensor`| Create tensors for candidates or truth variants.<br>Input: A candidate list; BAM; Reference FASTA.\n`PairWithNonVariants`| Pair truth variant tensors with non-variant tensors.<br>Input: Truth variants tensors; Candidate variant tensors.<br>_Important option(s):<br>`--amp x` \"1-time truth variants + x-time non-variants\"._\n`Tensor2Bin` | Create a compressed binary tensors file to facilitate and speed up future usage.<br>Input: Mixed tensors by `PairWithNonVariants`; Truth variants by `GetTruth` and a BED file marks the high confidence regions in the reference genome.<br>(Pypy incompatible)\n`CombineBins` | Merge smaller bins from `Tensor2Bin` into a complete larger bin.<br>(Pypy incompatible)\n\n---\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 0.8576737914684929,
      "result": {
        "original_header": "What are we working on right now?",
        "type": "Text_excerpt",
        "value": "* A full alignment representation for higher performance in the low complexity genomics regions.\n* Testing small technics to resolve some complex variants, e.g. a deletion that spans a SNP closely followed. \n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "supervised_classification"
    },
    {
      "confidence": 0.9924106174755827,
      "result": {
        "original_header": "What's new?",
        "type": "Text_excerpt",
        "value": "* 20200831\n    - added support for alternative allele \"*\". \"GetTruth.py\" now requires a reference genome as input. You don't need to change your usage if you use \"callVarBam.py\" for automatic scripts generation.\n* 20200416\n    - added two new options for haploid calling, `--haploid_precision` and `--haploid_sensitive` (in [#24](https://github.com/hku-bal/clair/issues/24))\n    - added a simple after calling solution to handle overlapped variants (in [#15](https://github.com/hku-bal/clair/issues/15))\n    - fixed haploid GT output (in [#17](https://github.com/hku-bal/clair/issues/17))\n* 20200309\n    - an ONT model trained with up to 578-fold coverage HG002 data from [The Human Pangenome Reference Consortium](https://humanpangenome.org/data/) is now available in [Pretrained Models](#pretrained-models). The below table shows the biased test results, i.e. testing samples were included in training, thus are not for benchmarking but suggest the performance cap of each model at different coverages. The new model shows significantly improved performance at high coverages. \n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "supervised_classification"
    }
  ],
  "documentation": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/HKU-BAL/Clair/tree/master/docs"
      },
      "technique": "file_exploration"
    }
  ],
  "download_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/HKU-BAL/Clair/releases"
      },
      "technique": "GitHub_API"
    }
  ],
  "forks_count": [
    {
      "confidence": 1,
      "result": {
        "type": "Number",
        "value": 12
      },
      "technique": "GitHub_API"
    }
  ],
  "forks_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/forks"
      },
      "technique": "GitHub_API"
    }
  ],
  "full_name": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "HKU-BAL/Clair"
      },
      "technique": "GitHub_API"
    }
  ],
  "full_title": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "Clair - deep neural network based variant caller"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "regular_expression"
    }
  ],
  "has_build_file": [
    {
      "confidence": 1,
      "result": {
        "format": "dockerfile",
        "type": "Url",
        "value": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/Dockerfile"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/Dockerfile",
      "technique": "file_exploration"
    }
  ],
  "images": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/docs/images/benchmark-modelWith2HD.png"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "regular_expression"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/docs/images/QualDist-ONT.png"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "regular_expression"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/docs/images/QualDist-PBCCS.png"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "regular_expression"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/docs/images/QualDist-ILMN.png"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "regular_expression"
    }
  ],
  "installation": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Option 1. Bioconda",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Installation"
        ],
        "type": "Text_excerpt",
        "value": "```bash\n# make sure channels are added in conda\nconda config --add channels defaults\nconda config --add channels bioconda\nconda config --add channels conda-forge\n\n# create conda environment named \"clair-env\"\nconda create -n clair-env -c bioconda clair\nconda activate clair-env\n\n# store clair.py PATH into $CLAIR variable\nCLAIR=`which clair.py`\n\n# run clair like this afterwards\npython $CLAIR --help\n```\n\nThe conda environment has the Pypy3 interpreter installed, but one Pypy3 package `intervaltree` is still missing. The reason why this is not installed by default is because this is not yet available in any conda repositories. To install the package for Pypy3, after activating the conda environment, please run the following commands:\n\n```bash\npypy3 -m ensurepip\npypy3 -m pip install --no-cache-dir intervaltree==3.0.2\n```\n\nThen download the trained models:\n\n```bash\n# download the trained model for ONT\nmkdir ont && cd ont\nwget http://www.bio8.cs.hku.hk/clair_models/ont/122HD34.tar\ntar -xf 122HD34.tar\ncd ../\n\n# download the trained model for PacBio CCS\nmkdir pacbio && cd pacbio\nwget http://www.bio8.cs.hku.hk/clair_models/pacbio/ccs/15.tar\ntar -xf 15.tar\ncd ../\n\n# download the trained model for Illumina\nmkdir illumina && cd illumina\nwget http://www.bio8.cs.hku.hk/clair_models/illumina/12345.tar\ntar -xf 12345.tar\ncd ../\n```\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Please install anaconda using the installation guide at https://docs.anaconda.com/anaconda/install/",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Installation",
          "Option 2. Build an anaconda virtual environment step by step"
        ],
        "type": "Text_excerpt",
        "value": "```bash\n# create and activate the environment named clair\nconda create -n clair python=3.7\nconda activate clair\n\n# install pypy and packages on clair environemnt\nconda install -c conda-forge pypy3.6\npypy3 -m ensurepip\npypy3 -m pip install intervaltree==3.0.2\n\n# install python packages on clair environment\npip install numpy==1.18.0 blosc==1.8.3 intervaltree==3.0.2 tensorflow==1.13.2 pysam==0.15.3 matplotlib==3.1.2\nconda install -c anaconda pigz==2.4\nconda install -c conda-forge parallel=20191122 zstd=1.4.4\nconda install -c bioconda samtools=1.10 vcflib=1.0.0 bcftools=1.10.2\n\n# clone Clair\ngit clone --depth 1 https://github.com/HKU-BAL/Clair.git\ncd Clair\nchmod +x clair.py\nexport PATH=`pwd`\":$PATH\"\n\n# store clair.py PATH into $CLAIR variable\nCLAIR=`which clair.py`\n\n# run clair like this afterwards\npython $CLAIR --help\n```\n\nThen download the trained models referring to `download the trained model` in [Installation - Option 1](#option-1-bioconda)\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Option 3. Docker",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Installation"
        ],
        "type": "Text_excerpt",
        "value": "```bash\n# clone Clair\ngit clone --depth 1 https://github.com/HKU-BAL/Clair.git\ncd Clair\n\n# build a docker image named clair_docker_image\ndocker build -f ./Dockerfile -t clair_docker_image . # You might need root privilege\n\n# run docker image\ndocker run -it clair_docker_image # You might need root privilege\n\n# store clair.py PATH into $CLAIR variable\nCLAIR=`which clair.py`\n\n# run clair like this afterwards\npython $CLAIR --help\n```\n\nThen download the trained models referring to `download the trained model` in [Installation - Option 1](#option-1-bioconda)\n\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "After Installation",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Installation"
        ],
        "type": "Text_excerpt",
        "value": "To check the version of Tensorflow you have installed:\n\n```bash\npython -c 'import tensorflow as tf; print(tf.__version__)'\n```\n\nTo do variant calling using trained models, CPU will suffice. Clair uses 4 threads by default in `callVarBam`. The number of threads to be used can be controlled using the parameter `--threads`. To train a new model, a high-end GPU and the GPU version of Tensorflow is needed. To install the GPU version of tensorflow:\n\n```bash\npip install tensorflow-gpu==1.13.2\n```\n\nThe installation of the `blosc` library might fail if your CPU doesn't support the AVX2 instruction set. Alternatively, you can compile and install from the latest source code available in [GitHub](https://github.com/Blosc/python-blosc) with the `DISABLE_BLOSC_AVX2` environment variable set.\n\n---\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Setup variables for variant calling commands afterwards",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "```bash\nCLAIR=\"[PATH_TO_CLAIR]/clair.py\"                         # e.g. clair.py\nMODEL=\"[MODEL_PATH]\"                                     # e.g. [PATH_TO_CLAIR_MODEL]/ont/model\nBAM_FILE_PATH=\"[YOUR_BAM_FILE]\"                          # e.g. chr21.bam\nREFERENCE_FASTA_FILE_PATH=\"[YOUR_REFERENCE_FASTA_FILE]\"  # e.g. chr21.fa\nKNOWN_VARIANTS_VCF=\"[YOUR_VCF_FILE]\"                     # e.g. chr21.vcf\n```\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "About Setting the Alternative Allele Frequency Cutoff",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Advanced Guides"
        ],
        "type": "Text_excerpt",
        "value": "Different from model training, in which all genome positions are candidates but randomly subsampled for training, variant calling using a trained model will require the user to define a minimal alternative allele frequency cutoff for a genome position to be considered as a candidate for variant calling. For all sequencing technologies, the lower the cutoff, the lower the speed. Setting a cutoff too low will increase the false positive rate significantly, while too high will increase the false negative rate significantly. \\\nThe option `--threshold` controls the cutoff in these submodules `callVarBam`, `callVarBamParallel` and `ExtractVariantCandidates`. The suggested cutoff is listed below for different sequencing technologies. A higher cutoff will increase the accuracy of datasets with poor sequencing quality, while a lower cutoff will increase the sensitivity in applications like clinical research. Setting a lower cutoff and further filter the variants by their quality is also a good practice.\n\nSequencing Technology | Alt. AF Cutoff |\n:---: |:---:|\nIllumina | 0.1 |\nPacBio CCS | 0.2 |\nONT | 0.2 |\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "ONT data",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Advanced Guides",
          "Variant quality cutoff selection"
        ],
        "type": "Text_excerpt",
        "value": "The variant quality distribution of Clair on ONT data is usually bimodal. The best quality cutoff is usually the valley between two peaks plus 50. The image below shows the quality distribution of the variants in HG002 called using ~50-fold coverage ONT data. The best quality cutoff is 748.\n\n![](docs/images/QualDist-ONT.png)\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "PacBio CCS data",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Advanced Guides",
          "Variant quality cutoff selection"
        ],
        "type": "Text_excerpt",
        "value": "The image below shows the quality distribution of the variants in HG005 called using ~30-fold coverage PacBio CCS data. The best quality cutoff is 143.\n\n![](docs/images/QualDist-PBCCS.png)\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Illumina data",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Advanced Guides",
          "Variant quality cutoff selection"
        ],
        "type": "Text_excerpt",
        "value": "The image below shows the quality distribution of the variants in HG002 called using ~60-fold coverage Illumina data. The best quality cutoff is 113.\n\n![](docs/images/QualDist-ILMN.png)\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 0.9142878307577356,
      "result": {
        "original_header": "Pretrained Models",
        "type": "Text_excerpt",
        "value": "Please download models from [here](http://www.bio8.cs.hku.hk/clair_models/) or click on the links below. \nFolder | Tech | Suggested | Sample used | Aligner | Download |\n--- | :---: | :---: | :---: | :---: | :---: |\nillumina | Illumina | * | HG001,2,3,4,5 | Novoalign | [Download](http://www.bio8.cs.hku.hk/clair_models/illumina/12345.tar)\npacbio/ccs | PacBio CCS (HiFi) | * |HG001,5 | Minimap2 | [Download](http://www.bio8.cs.hku.hk/clair_models/pacbio/ccs/15.tar)\nont | ONT R9.4.1 | | HG001,2 | Minimap2 | [Download](http://www.bio8.cs.hku.hk/clair_models/ont/12.tar)\nont | ONT R9.4.1 | | HG001,2,3,4 | Minimap2 | [Download](http://www.bio8.cs.hku.hk/clair_models/ont/1234.tar)\nont | ONT R9.4.1 | * | HG001,2,2HD,3,4 | Minimap2 | [Download](http://www.bio8.cs.hku.hk/clair_models/ont/122HD34.tar) \n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "supervised_classification"
    }
  ],
  "invocation": [
    {
      "confidence": 0.8702502581507651,
      "result": {
        "original_header": "Pretrained Models",
        "type": "Text_excerpt",
        "value": "Folder | Tech | Suggested | Sample used | Aligner | Download |\n--- | :---: | :---: | :---: | :---: | :---: |\nillumina | Illumina | * | HG001,2,3,4,5 | Novoalign | [Download](http://www.bio8.cs.hku.hk/clair_models/illumina/12345.tar)\npacbio/ccs | PacBio CCS (HiFi) | * |HG001,5 | Minimap2 | [Download](http://www.bio8.cs.hku.hk/clair_models/pacbio/ccs/15.tar)\nont | ONT R9.4.1 | | HG001,2 | Minimap2 | [Download](http://www.bio8.cs.hku.hk/clair_models/ont/12.tar)\nont | ONT R9.4.1 | | HG001,2,3,4 | Minimap2 | [Download](http://www.bio8.cs.hku.hk/clair_models/ont/1234.tar)\nont | ONT R9.4.1 | * | HG001,2,2HD,3,4 | Minimap2 | [Download](http://www.bio8.cs.hku.hk/clair_models/ont/122HD34.tar) \n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "supervised_classification"
    }
  ],
  "issue_tracker": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/issues"
      },
      "technique": "GitHub_API"
    }
  ],
  "keywords": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "bioinformatics, computational-biology, deep-learning, variant-calling"
      },
      "technique": "GitHub_API"
    }
  ],
  "license": [
    {
      "confidence": 1,
      "result": {
        "name": "BSD 3-Clause \"New\" or \"Revised\" License",
        "spdx_id": "BSD-3-Clause",
        "type": "License",
        "url": "https://api.github.com/licenses/bsd-3-clause",
        "value": "https://api.github.com/licenses/bsd-3-clause"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "type": "File_dump",
        "value": "Copyright 2019 The University of Hong Kong, Department of Computer Science\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this\n   list of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice,\n   this list of conditions and the following disclaimer in the documentation\n   and/or other materials provided with the distribution.\n\n3. Neither the name of the copyright holder nor the names of its contributors\n   may be used to endorse or promote products derived from this software without\n   specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/LICENSE.md",
      "technique": "file_exploration"
    }
  ],
  "logo": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/docs/images/clair-logo.png"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "regular_expression"
    }
  ],
  "name": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "Clair"
      },
      "technique": "GitHub_API"
    }
  ],
  "owner": [
    {
      "confidence": 1,
      "result": {
        "type": "Organization",
        "value": "HKU-BAL"
      },
      "technique": "GitHub_API"
    }
  ],
  "programming_languages": [
    {
      "confidence": 1,
      "result": {
        "name": "Python",
        "size": 297725,
        "type": "Programming_language",
        "value": "Python"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "name": "Dockerfile",
        "size": 1009,
        "type": "Programming_language",
        "value": "Dockerfile"
      },
      "technique": "GitHub_API"
    }
  ],
  "readme_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md"
      },
      "technique": "file_exploration"
    }
  ],
  "releases": [
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "ncl935",
          "type": "User"
        },
        "date_created": "2020-08-31T04:12:59Z",
        "date_published": "2020-09-01T07:21:33Z",
        "description": "v2.1.1 release",
        "html_url": "https://github.com/HKU-BAL/Clair/releases/tag/v2.1.1",
        "name": "v2.1.1",
        "release_id": 30488221,
        "tag": "v2.1.1",
        "tarball_url": "https://api.github.com/repos/HKU-BAL/Clair/tarball/v2.1.1",
        "type": "Release",
        "url": "https://api.github.com/repos/HKU-BAL/Clair/releases/30488221",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/releases/30488221",
        "zipball_url": "https://api.github.com/repos/HKU-BAL/Clair/zipball/v2.1.1"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "chaklim",
          "type": "User"
        },
        "date_created": "2020-04-06T13:37:10Z",
        "date_published": "2020-04-15T15:20:39Z",
        "description": "v2.1.0 release",
        "html_url": "https://github.com/HKU-BAL/Clair/releases/tag/v2.1.0",
        "name": "v2.1.0",
        "release_id": 25534947,
        "tag": "v2.1.0",
        "tarball_url": "https://api.github.com/repos/HKU-BAL/Clair/tarball/v2.1.0",
        "type": "Release",
        "url": "https://api.github.com/repos/HKU-BAL/Clair/releases/25534947",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/releases/25534947",
        "zipball_url": "https://api.github.com/repos/HKU-BAL/Clair/zipball/v2.1.0"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "chaklim",
          "type": "User"
        },
        "date_created": "2020-02-10T16:03:34Z",
        "date_published": "2020-02-12T01:15:14Z",
        "description": "v2.0.7 release",
        "html_url": "https://github.com/HKU-BAL/Clair/releases/tag/v2.0.7",
        "name": "v2.0.7",
        "release_id": 23589121,
        "tag": "v2.0.7",
        "tarball_url": "https://api.github.com/repos/HKU-BAL/Clair/tarball/v2.0.7",
        "type": "Release",
        "url": "https://api.github.com/repos/HKU-BAL/Clair/releases/23589121",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/releases/23589121",
        "zipball_url": "https://api.github.com/repos/HKU-BAL/Clair/zipball/v2.0.7"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "chaklim",
          "type": "User"
        },
        "date_created": "2019-12-23T09:21:58Z",
        "date_published": "2019-12-23T09:23:29Z",
        "description": "v2.0.6 release",
        "html_url": "https://github.com/HKU-BAL/Clair/releases/tag/v2.0.6",
        "name": "v2.0.6",
        "release_id": 22423863,
        "tag": "v2.0.6",
        "tarball_url": "https://api.github.com/repos/HKU-BAL/Clair/tarball/v2.0.6",
        "type": "Release",
        "url": "https://api.github.com/repos/HKU-BAL/Clair/releases/22423863",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/releases/22423863",
        "zipball_url": "https://api.github.com/repos/HKU-BAL/Clair/zipball/v2.0.6"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "chaklim",
          "type": "User"
        },
        "date_created": "2019-12-10T16:48:52Z",
        "date_published": "2019-12-11T14:19:17Z",
        "description": "v2.0.5 release",
        "html_url": "https://github.com/HKU-BAL/Clair/releases/tag/v2.0.5",
        "name": "v2.0.5",
        "release_id": 22145836,
        "tag": "v2.0.5",
        "tarball_url": "https://api.github.com/repos/HKU-BAL/Clair/tarball/v2.0.5",
        "type": "Release",
        "url": "https://api.github.com/repos/HKU-BAL/Clair/releases/22145836",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/releases/22145836",
        "zipball_url": "https://api.github.com/repos/HKU-BAL/Clair/zipball/v2.0.5"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "chaklim",
          "type": "User"
        },
        "date_created": "2019-12-05T06:31:29Z",
        "date_published": "2019-12-05T06:43:55Z",
        "description": "v2.0.4 release",
        "html_url": "https://github.com/HKU-BAL/Clair/releases/tag/v2.0.4",
        "name": "v2.0.4",
        "release_id": 21985543,
        "tag": "v2.0.4",
        "tarball_url": "https://api.github.com/repos/HKU-BAL/Clair/tarball/v2.0.4",
        "type": "Release",
        "url": "https://api.github.com/repos/HKU-BAL/Clair/releases/21985543",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/releases/21985543",
        "zipball_url": "https://api.github.com/repos/HKU-BAL/Clair/zipball/v2.0.4"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "chaklim",
          "type": "User"
        },
        "date_created": "2019-12-04T17:05:53Z",
        "date_published": "2019-12-04T17:08:08Z",
        "description": "v2.0.3 release",
        "html_url": "https://github.com/HKU-BAL/Clair/releases/tag/v2.0.3",
        "name": "v2.0.3",
        "release_id": 21970193,
        "tag": "v2.0.3",
        "tarball_url": "https://api.github.com/repos/HKU-BAL/Clair/tarball/v2.0.3",
        "type": "Release",
        "url": "https://api.github.com/repos/HKU-BAL/Clair/releases/21970193",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/releases/21970193",
        "zipball_url": "https://api.github.com/repos/HKU-BAL/Clair/zipball/v2.0.3"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "chaklim",
          "type": "User"
        },
        "date_created": "2019-11-27T16:08:53Z",
        "date_published": "2019-11-27T16:10:54Z",
        "description": "v2.0.2 release",
        "html_url": "https://github.com/HKU-BAL/Clair/releases/tag/v2.0.2",
        "name": "v2.0.2",
        "release_id": 21806238,
        "tag": "v2.0.2",
        "tarball_url": "https://api.github.com/repos/HKU-BAL/Clair/tarball/v2.0.2",
        "type": "Release",
        "url": "https://api.github.com/repos/HKU-BAL/Clair/releases/21806238",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/releases/21806238",
        "zipball_url": "https://api.github.com/repos/HKU-BAL/Clair/zipball/v2.0.2"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "chaklim",
          "type": "User"
        },
        "date_created": "2019-11-19T13:41:34Z",
        "date_published": "2019-11-19T13:43:51Z",
        "description": "v2.0.1 release",
        "html_url": "https://github.com/HKU-BAL/Clair/releases/tag/v2.0.1",
        "name": "v2.0.1",
        "release_id": 21585796,
        "tag": "v2.0.1",
        "tarball_url": "https://api.github.com/repos/HKU-BAL/Clair/tarball/v2.0.1",
        "type": "Release",
        "url": "https://api.github.com/repos/HKU-BAL/Clair/releases/21585796",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/releases/21585796",
        "zipball_url": "https://api.github.com/repos/HKU-BAL/Clair/zipball/v2.0.1"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "chaklim",
          "type": "User"
        },
        "date_created": "2019-11-10T16:26:10Z",
        "date_published": "2019-11-12T04:41:20Z",
        "description": "v2.0.0 release",
        "html_url": "https://github.com/HKU-BAL/Clair/releases/tag/v2.0.0",
        "name": "v2.0.0",
        "release_id": 21387956,
        "tag": "v2.0.0",
        "tarball_url": "https://api.github.com/repos/HKU-BAL/Clair/tarball/v2.0.0",
        "type": "Release",
        "url": "https://api.github.com/repos/HKU-BAL/Clair/releases/21387956",
        "value": "https://api.github.com/repos/HKU-BAL/Clair/releases/21387956",
        "zipball_url": "https://api.github.com/repos/HKU-BAL/Clair/zipball/v2.0.0"
      },
      "technique": "GitHub_API"
    }
  ],
  "somef_missing_categories": [
    "citation",
    "acknowledgement",
    "run",
    "download",
    "requirements",
    "contact",
    "contributors",
    "faq",
    "support",
    "identifier",
    "executable_example"
  ],
  "somef_provenance": {
    "date": "2024-11-04 02:52:03",
    "somef_schema_version": "1.0.0",
    "somef_version": "0.9.5"
  },
  "stargazers_count": [
    {
      "confidence": 1,
      "result": {
        "type": "Number",
        "value": 104
      },
      "technique": "GitHub_API"
    }
  ],
  "usage": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Quick demo",
        "parent_header": [
          "Clair - deep neural network based variant caller"
        ],
        "type": "Text_excerpt",
        "value": "* Step 1. Install Clair, preferably using [Installation - Option 1](#option-1-bioconda)\n* Step 2. Run\n\n```bash\nconda activate clair-env\nmkdir clairDemo\ncd clairDemo\nwget 'http://www.bio8.cs.hku.hk/clair_models/demo/clairDemo.sh'\nbash clairDemo.sh\n```\n\n* Step 3. Check the results using `less -S ./training/chr21.vcf`\n\n---\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "General usage",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "```bash\nCLAIR=\"[PATH_TO_CLAIR]/clair.py\"\n\n# to run a submodule using python\npython $CLAIR [submodule] [options]\n\n# to run a Pypy-able submodule using pypy (if `pypy3` is the executable command for Pypy)\npypy3 $CLAIR [submodule] [options]\n```\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Call variants at known variant sites or in a chromosome  (using `callVarBam`)",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "**For whole genome variant calling, please use `callVarBamParallel` to generate multiple commands that invoke `callVarBam` on smaller chromosome chucks.**\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Call variants in a chromosome",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Usage",
          "Call variants at known variant sites or in a chromosome  (using `callVarBam`)"
        ],
        "type": "Text_excerpt",
        "value": "```bash\n# variables\nVARIANT_CALLING_OUTPUT_PATH=\"[YOUR_OUTPUT_PATH]\"         # e.g. calls/chr21.vcf (please make sure the directory exists)\nCONTIG_NAME=\"[CONTIG_NAME_FOR_VARIANT_CALLING]\"          # e.g. chr21\nSAMPLE_NAME=\"[SAMPLE_NAME]\"                              # e.g. HG001\n\npython $CLAIR callVarBam \\\n--chkpnt_fn \"$MODEL\" \\\n--ref_fn \"$REFERENCE_FASTA_FILE_PATH\" \\\n--bam_fn \"$BAM_FILE_PATH\" \\\n--ctgName \"$CONTIG_NAME\" \\\n--sampleName \"$SAMPLE_NAME\" \\\n--call_fn \"$VARIANT_CALLING_OUTPUT_PATH\"\n\ncd \"$VARIANT_CALLING_OUTPUT_PATH\"\n```\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Call variants at known variant sites in a chromosome",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Usage",
          "Call variants at known variant sites or in a chromosome  (using `callVarBam`)"
        ],
        "type": "Text_excerpt",
        "value": "```bash\n# variables\nVARIANT_CALLING_OUTPUT_PATH=\"[YOUR_OUTPUT_PATH]\"         # e.g. calls/chr21.vcf (please make sure the directory exists)\nCONTIG_NAME=\"[CONTIG_NAME_FOR_VARIANT_CALLING]\"          # e.g. chr21\nSAMPLE_NAME=\"[SAMPLE_NAME]\"                              # e.g. HG001\nKNOWN_VARIANTS_VCF=\"[YOUR_VCF_PATH]\"                     # e.g. chr21_candidates.vcf\n\npython $CLAIR callVarBam \\\n--chkpnt_fn \"$MODEL\" \\\n--ref_fn \"$REFERENCE_FASTA_FILE_PATH\" \\\n--bam_fn \"$BAM_FILE_PATH\" \\\n--ctgName \"$CONTIG_NAME\" \\\n--sampleName \"$SAMPLE_NAME\" \\\n--vcf_fn \"$KNOWN_VARIANTS_VCF\" \\\n--call_fn \"$VARIANT_CALLING_OUTPUT_PATH\" \\\n\ncd \"$VARIANT_CALLING_OUTPUT_PATH\"\n```\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Call whole-genome variants in parallel (using `callVarBamParallel`)",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "```bash\n# variables\nSAMPLE_NAME=\"NA12878\"\nOUTPUT_PREFIX=\"call/var\"                        # please make sure the call/ directory exists\n\n# create command.sh for run jobs in parallel\npython $CLAIR callVarBamParallel \\\n--chkpnt_fn \"$MODEL\" \\\n--ref_fn \"$REFERENCE_FASTA_FILE_PATH\" \\\n--bam_fn \"$BAM_FILE_PATH\" \\\n--threshold 0.2 \\\n--sampleName \"$SAMPLE_NAME\" \\\n--output_prefix \"$OUTPUT_PREFIX\" > command.sh\n\n# disable GPU if you have one installed\nexport CUDA_VISIBLE_DEVICES=\"\"\n\n# run Clair with 4 concurrencies\ncat command.sh | parallel -j4\n\n# Find incomplete VCF files and rerun them\nfor i in OUTPUT_PREFIX.*.vcf; do if ! [ -z \"$(tail -c 1 \"$i\")\" ]; then echo \"$i\"; fi ; done | grep -f - command.sh | sh\n\n# concatenate vcf files and sort the variants called\nvcfcat ${OUTPUT_PREFIX}.*.vcf | bcftools sort -m 2G | bgziptabix snp_and_indel.vcf.gz\n```\n\n#### Notes"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Parallelization",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Usage",
          "Call whole-genome variants in parallel (using `callVarBamParallel`)",
          "Notes"
        ],
        "type": "Text_excerpt",
        "value": "* `callVarBamParallel` generates a file of `callVarBam` commands that can be run in parallel.\n* **Use GNU parallel to run commands in parallel** - `parallel -j4` will run four concurrencies in parallel using GNU parallel. We suggest using half the number of available CPU cores.\n* **An alternative to GNU parallel** - If [GNU parallel](https://www.gnu.org/software/parallel/) is not installed, please try ```awk '{print \"\\\"\"$0\"\\\"\"}' commands.sh | xargs -P4 -L1 sh -c```"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Options",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Usage",
          "Call whole-genome variants in parallel (using `callVarBamParallel`)",
          "Notes"
        ],
        "type": "Text_excerpt",
        "value": "* **Haploid Precision Mode** - Use `--haploid_precision` option for haploid samples \\\n(output homozygous variants only).\n* **Haploid Sensitive Mode** - Use `--haploid_sensitive` option for haploid samples \\\n(output all variants except variants with genotype 1/2).\n* **Choosing genome sequences and positions for variant calling** - callVarBamParallel by default will generate commands for chromosome {1..22},X,Y (insensible to the \"chr\" prefix). To call variants in other sequences, you can either input via the option `--bed_fn` your own BED file with three columns including the target sequence names, starting positions and ending positions, or use the option `--includingAllContigs` to include all sequences in the input FASTA file. If you work on a non-human sample, please always use a BED file or the `--includingAllContigs` option to define the sequences you want Clair to work on.\n* **For more accurate Indel calling** - You may consider using the `--pysam_for_all_indel_bases` option for more accurate Indel results. On Illumina data and PacBio CCS data, the option requires 20% to 50% longer running time. On ONT data, Clair can run up to ten times slower, while the improvement in accuracy is not significant."
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Other considerations",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Usage",
          "Call whole-genome variants in parallel (using `callVarBamParallel`)",
          "Notes"
        ],
        "type": "Text_excerpt",
        "value": "* **Setting an appropriate allele frequency cutoff** - Please refer to [About Setting the Alternative Allele Frequency Cutoff](#about-setting-the-alternative-allele-frequency-cutoff)\n* **Check for incomplete (unfinished) VCF files** - Incomplete VCF files happens when 'out of memory' or other errors occur. The command in the example finds for a newline at the end of the VCF files, and regenerate the incomplete files.\n* **Disabling GPU: Clair uses CPU for variant calling** - To avoid the tensorflow library from using GPU, `CUDA_VISIBLE_DEVICES=\"\"` makes GPUs invisible to Clair so it will only use CPU for variant calling. Please notice that unless you want to run `commands.sh` in serial, you cannot use GPU because one running copy of Clair will occupy all available memory of a GPU. While the bottleneck of `callVarBam` is at the `CreateTensor` script, which only runs on CPU, the effect of GPU accelerate is insignificant (roughly just about 15% faster). But if you have multiple GPU cards in your system, and you want to utilize them in variant calling, you may want to split the `commands.sh` into parts, and run the parts by firstly `export CUDA_VISIBLE_DEVICES=\"$i\"`, where `$i` is an integer from 0 identifying the ID of the GPU to be used.\n* **Concatenating results** - `vcfcat` and `bgziptabix` commands are from [vcflib](https://github.com/vcflib/vcflib), and are installed by default.\n\n---\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Clair uses PyPy for speedup",
        "parent_header": [
          "Clair - deep neural network based variant caller",
          "Advanced Guides"
        ],
        "type": "Text_excerpt",
        "value": "Without a change to the code, using PyPy python interpreter on some tensorflow independent modules such as `ExtractVariantCandidates` and `CreateTensor` gives a 5-10 times speed up. Pypy python interpreter can be installed by apt-get, yum, Homebrew, MacPorts, etc. If you have no root access to your system, the official website of Pypy provides a portable binary distribution for Linux. Besides following the conda installation method in [Installation](#installation), the following is a rundown extracted from Pypy's website (PyPy3.6 v7.2.0 in this case) on how to install the binaries.\n\n```bash\nwget https://github.com/squeaky-pl/portable-pypy/releases/download/pypy3.6-7.2.0/pypy3.6-7.2.0-linux_x86_64-portable.tar.bz2\ntar -jxf pypy3.6-7.2.0-linux_x86_64-portable.tar.bz2\ncd pypy3.6-7.2.0-linux_x86_64-portable/bin\n./pypy3 -m pip install -U pip wheel intervaltree\n# Use pypy3 as an inplace substitution of python to run pypy-able scripts\n```\n\nTo guarantee a good user experience (good speed), pypy must be installed to run `callVarBam` (call variants from BAM), and `callVarBamParallel` that generate parallelizable commands to run `callVarBam`.\nTensorflow is optimized using Cython thus not compatible with `pypy3`. For the list of scripts compatible to `pypy3`, please refer to the [Submodule Descriptions](#submodule-descriptions).\n\n*Pypy is an awesome Python JIT interpreter, you can donate to [the project](https://pypy.org).*\n"
      },
      "source": "https://raw.githubusercontent.com/HKU-BAL/Clair/master/README.md",
      "technique": "header_analysis"
    }
  ]
}