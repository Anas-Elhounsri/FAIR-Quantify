{
  "citation": [
    {
      "confidence": 1,
      "result": {
        "original_header": "AntiSplodge: a neural-network-based RNA-profile deconvolution pipeline designed for spatial transcriptomics",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "References"
        ],
        "type": "Text_excerpt",
        "value": "DOI: https://doi.org/10.1093/nargab/lqac073\n\nPublished: 10 October 2022 in NAR Genomics and Bioinformatics, Volume 4, Issue 4, December 2022, lqac073.\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    }
  ],
  "code_repository": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/HealthML/AntiSplodge"
      },
      "technique": "GitHub_API"
    }
  ],
  "date_created": [
    {
      "confidence": 1,
      "result": {
        "type": "Date",
        "value": "2021-05-05T11:44:39Z"
      },
      "technique": "GitHub_API"
    }
  ],
  "date_updated": [
    {
      "confidence": 1,
      "result": {
        "type": "Date",
        "value": "2023-05-18T15:35:41Z"
      },
      "technique": "GitHub_API"
    }
  ],
  "description": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "Spatial Transcriptomics deconvolution pipeline"
      },
      "technique": "GitHub_API"
    }
  ],
  "documentation": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Documentation",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />"
        ],
        "type": "Text_excerpt",
        "value": "The documentation is available at: https://antisplodge.readthedocs.io/.\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "format": "readthedocs",
        "type": "Url",
        "value": "https://antisplodge.readthedocs.io/"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "regular_expression"
    }
  ],
  "download_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/HealthML/AntiSplodge/releases"
      },
      "technique": "GitHub_API"
    }
  ],
  "executable_example": [
    {
      "confidence": 1,
      "result": {
        "format": "jupyter_notebook",
        "type": "Url",
        "value": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/AntiSplodge_minimal_example.ipynb"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/AntiSplodge_minimal_example.ipynb",
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "format": "jupyter_notebook",
        "type": "Url",
        "value": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/AntiSplodge_10fold_cross_validation.ipynb"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/AntiSplodge_10fold_cross_validation.ipynb",
      "technique": "file_exploration"
    }
  ],
  "forks_count": [
    {
      "confidence": 1,
      "result": {
        "type": "Number",
        "value": 1
      },
      "technique": "GitHub_API"
    }
  ],
  "forks_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://api.github.com/repos/HealthML/AntiSplodge/forks"
      },
      "technique": "GitHub_API"
    }
  ],
  "full_name": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "HealthML/AntiSplodge"
      },
      "technique": "GitHub_API"
    }
  ],
  "full_title": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "AntiSplodge  "
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "regular_expression"
    }
  ],
  "images": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/HealthML/AntiSplodge//main/AS_overview.png"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "regular_expression"
    }
  ],
  "installation": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Using pip",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Installation"
        ],
        "type": "Text_excerpt",
        "value": "You can install the package directy by running the following pip command:\n\n`pip install antisplodge`\n\nYou can find the pip page at: https://pypi.org/project/AntiSplodge/\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "From GitHuB",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Installation"
        ],
        "type": "Text_excerpt",
        "value": "You can install the package directly from GitHub by running the following command:\n\n`python -m pip install git+https://github.com/HealthML/AntiSplodge.git`\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Directly from source (this repository)",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Installation"
        ],
        "type": "Text_excerpt",
        "value": "Clone the repository to a folder of your choice.\n\nFrom a terminal this can be done by running:\n\n`git clone git@github.com:HealthML/AntiSplodge.git`\n\nSubsequently, run the following pip command from your terminal (in the root of cloned directory):\n\n`pip install .`\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    }
  ],
  "issue_tracker": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://api.github.com/repos/HealthML/AntiSplodge/issues"
      },
      "technique": "GitHub_API"
    }
  ],
  "keywords": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": ""
      },
      "technique": "GitHub_API"
    }
  ],
  "license": [
    {
      "confidence": 1,
      "result": {
        "name": "MIT License",
        "spdx_id": "MIT",
        "type": "License",
        "url": "https://api.github.com/licenses/mit",
        "value": "https://api.github.com/licenses/mit"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "type": "File_dump",
        "value": "Copyright (c) 2022 The Hasso-Plattner-Institut f\u00fcr Digital Engineering gGmbH (HPI)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/LICENSE",
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
        "type": "Text_excerpt",
        "value": "![Overview](AS_overview.png)\n\n**AntiSplodge**, is a simple feed-forward neural network-based pipeline, designed to effective deconvolute spatial transcriptomics profiles, in an easy, fast, and, intuitive manner. It comes with all functions required to do a full deconvolution, from sampling synthetic spot profiles required to train the neural network, to the methods required to train the supplied network architecture. It is neatly packed into a python package with function calls similar to that of traditional R-packages, where users are only exposed to fiddling with hyperparameters.\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Using pip",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Installation"
        ],
        "type": "Text_excerpt",
        "value": "You can install the package directy by running the following pip command:\n\n`pip install antisplodge`\n\nYou can find the pip page at: https://pypi.org/project/AntiSplodge/\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "From GitHuB",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Installation"
        ],
        "type": "Text_excerpt",
        "value": "You can install the package directly from GitHub by running the following command:\n\n`python -m pip install git+https://github.com/HealthML/AntiSplodge.git`\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Directly from source (this repository)",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Installation"
        ],
        "type": "Text_excerpt",
        "value": "Clone the repository to a folder of your choice.\n\nFrom a terminal this can be done by running:\n\n`git clone git@github.com:HealthML/AntiSplodge.git`\n\nSubsequently, run the following pip command from your terminal (in the root of cloned directory):\n\n`pip install .`\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Standard full pipeline",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "```python\nimport antisplodge as AS\n# SC should be the single-cell dataset formatted as .h5ad (AnnData)\nExp = AS.DeconvolutionExperiment(SC) \nExp.setVerbosity(True)\n\n# CELLTYPE_COLUMN should be replaced with actual column\nExp.setCellTypeColumn('CELLTYPE_COLUMN') \n# Use 80% as train data and split the rest into a 50/50 split validation and testing\nExp.splitTrainTestValidation(train=0.8, rest=0.5)\n\n# Generate profiles, num_profiles = [#training, #validation, #testing]\n# This will construct 100.000 training profiles, 10.000 validation profiles, and, 10.000 test profiles\n# All profiles will be generated from 10 cell profiles (CD=10)\n# for train, validation and test (respectively)\nExp.generateTrainTestValidation(num_profiles=[100000,10000,10000], CD=[10,10])\n\n# Load the profiles into data loaders\nExp.setupDataLoaders()\n\n# Initialize Neural network-model and allocate it to the cuda_id specified\n# Use 'cuda_id=\"cpu\"' if you want to allocate it to a cpu\nExp.setupModel(cuda_id=6)\nExp.setupOptimizerAndCriterion(learning_rate = 0.001)\n\n# Train the model using the profiles generated \n# The patience parameter determines how long it will run without fining a new better (lower) error \n# The weights found will be saved to 'NNDeconvolver.pt' and will be autoloaded once the training is complete \nstats = AS.train(Exp, save_file=\"NNDeconvolver.pt\", patience=100)\n\n# print the mean JSD for train, validation, and test\nprint(AS.getMeanJSD(Exp, \"train\"), AS.getMeanJSD(Exp, \"validation\"), AS.getMeanJSD(Exp, \"test\"))\n\n#\n# Afterwards do prediction\n#\n\n# Assuming we have a spatial transcriptomics dataset ST formatted in .h5ad (AnnData)\n# create dataloader so that we can predict the profiles of each spot in our ST dataset\ndataset_spots = AS.SingleCellDataset(torch.from_numpy(np.array(ST.X.toarray())).float(), torch.from_numpy(np.array([0]*ST.n_obs)).float())\nspots_loader = DataLoader(dataset=dataset_spots,\n                      batch_size=50, # batch_size doesn't matter \n)\n\nspot_preds = AS.predict(Exp, spots_loader) # predict spots\n# The results for each ST profile (spot) is now in spot_preds and can be used for further analysis \n```\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Order of execution",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "1. **Start an experiment**: `Exp = AS.DeconvolutionExperiment(SC)` must be the first call. \n\n2. **Define datasets based on the SC dataset**: `Exp.splitTrainTestValidation(train=0.8, rest=0.5)` must be called before \n`Exp.generateTrainTestValidation(num_profiles=[10000,5000,1000], CD=[1,10])`.\n\n3. **Setup model and optimizers**: `Exp.setupModel(cuda_id=6)` must be called before \n`Exp.setupOptimizerAndCriterion(learning_rate = 0.001)`. Each time `setupModel` is called, `Exp.setupOptimizerAndCriterion` must be called again, as optimizers and criterions are bound to the model, for use during training. \n\n4. **Train the model**: `stats = AS.train(Exp, save_file=\"NNDeconvolver.pt\", patience=100)`.\n\n4. **Predict spots using the model**: `spot_preds = AS.predict(Exp, spots_loader)`.\n\nThe order of execution must be in the order listed above. \n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Several ways of training",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Useful snippets"
        ],
        "type": "Text_excerpt",
        "value": "**1. Standard training**\n\nThe standard training procedure.\n```python\n# Assuming an Exp is an DeconvolutionExperiment\nAS.train(experiment=Exp, patience=25, save_file=None, auto_load_model_on_finish=True) # default parameters\n```\n**2. Several warm restarts**\n\nDo 10 warm restarts with a low patience (n=5), this will autoload the model per train call.\nThis will make the best model weights be loaded back onto the model and it will try again from these settings\n```python\nbest_error = None\n# Do 10 warm restarts \nfor i in range(10):\n    AS.train(experiment=Exp, patience=5, best_loss=best_error)\n    best_error = np.min(stats['validation_loss'])\n```\n\n**3. Lowering learning rate**\n\nStart with a high learning rate and lower this by half for each warm restart.\n```python\nlr = 0.01\nall_stats = []\nbest_error = None\n\n# do 5 warm restarts with decreasing learning rate\nfor i in range(5):\n    print(\"Training with learning rate:\", lr)\n    Exp.setupOptimizerAndCriterion(learning_rate=lr)\n    lr /= 10 # reduce learning rate by a factor of 10\n    \n    # For longer training, increase patience threshold\n    stats = AS.train(Exp, save_file=\"NNDeconvolver.pt\", patience=25, best_loss=best_error) \n    all_stats.extend(stats)\n    \n    best_error = np.min(stats['validation_loss']) # set best error as the target error to beat\n    # the results in stats is the training errors during in each epoch (which might be needed for training plots)\n```\n\n**4. Running on systems with reduced memory using smaller sets of training data**\n\nFor users having trouble with the memory footprint of the profile generation, it is possible to generate smaller sets of training and validation profiles. \n```python\nExp.splitTrainTestValidation(train=0.8, rest=0.5) # define the dataset splits\nExp.setupModel(cuda_id=6) # the model can be built beforehand\nbest_error = None\n\n# do 100 warm restarts with smaller chunks of training data\nfor i in range(100):\n    Exp.generateTrainTestValidation(num_profiles=[5000,1000,1], CD=[1,10])\n    Exp.setupDataLoaders()\n    AS.train(experiment=Exp, save_file=\"CurrentDeconvolver.pt\", patience=10, best_loss=best_error)\n    \n    best_error = np.min(stats['validation_loss']) \n\n# Remember to generate test profiles after training is complete \nExp.generateTrainTestValidation(num_profiles=[1,1,1000], CD=[1,10])\n\n# Continue as usual\n```\n\n**5. Searching for solution near recent local minima**\n\nIt is often useful to keep searching in weight settings near recent best weights, do so will the code below:\n```python\n# Do 100 warm restarts with decreasing learning rate \nlr = 0.01 # Consider changing learning rate (lr) during run\nbest_error=None # no target error to beat in the beginning\nfor k in range(100):\n    lr /= 1.5\n    #print(\"Training with learning rate:\", lr)\n    Exp.setupOptimizerAndCriterion(learning_rate = lr)\n    \n    # Train the experiment constructed by passing the experiment to the AntiSplodge training function \n    AS.train(Exp, save_file=\"ModelCheckpoint.pt\", patience=, best_loss=best_error) # For longer training, increase patience threshold\n    best_error = AS.getMeanJSD(Exp, \"validation\") # set best error as the target error to beat\n    \n    print(\"Restart [{}] - JSDs\".format(k),AS.getMeanJSD(Exp, \"train\"), AS.getMeanJSD(Exp, \"validation\"))\n    \n    \nprint(\"Test accuracy\", AS.getMeanJSD(Exp, \"test\"))\n```\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "AntiSplodge: a neural-network-based RNA-profile deconvolution pipeline designed for spatial transcriptomics",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "References"
        ],
        "type": "Text_excerpt",
        "value": "DOI: https://doi.org/10.1093/nargab/lqac073\n\nPublished: 10 October 2022 in NAR Genomics and Bioinformatics, Volume 4, Issue 4, December 2022, lqac073.\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "License",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />"
        ],
        "type": "Text_excerpt",
        "value": "The source code for AntiSplodge is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Known issues",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />"
        ],
        "type": "Text_excerpt",
        "value": "- AntiSplodge is prone to be affected by bad initiations. Oftentimes, this can be resolved by simply restarting the Experiment (or re-initializing the model). This seems to be more frequent when solving problems with many classes (large number of cell types).\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    }
  ],
  "name": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "AntiSplodge"
      },
      "technique": "GitHub_API"
    }
  ],
  "owner": [
    {
      "confidence": 1,
      "result": {
        "type": "Organization",
        "value": "HealthML"
      },
      "technique": "GitHub_API"
    }
  ],
  "programming_languages": [
    {
      "confidence": 1,
      "result": {
        "name": "Jupyter Notebook",
        "size": 545689,
        "type": "Programming_language",
        "value": "Jupyter Notebook"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "name": "Python",
        "size": 33816,
        "type": "Programming_language",
        "value": "Python"
      },
      "technique": "GitHub_API"
    }
  ],
  "readme_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md"
      },
      "technique": "file_exploration"
    }
  ],
  "related_documentation": [
    {
      "confidence": 1,
      "result": {
        "format": "readthedocs",
        "type": "Url",
        "value": "https://anndata.readthedocs.io/"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "regular_expression"
    }
  ],
  "requirements": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Dependencies",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />"
        ],
        "type": "Text_excerpt",
        "value": "The list of dependencies are:\n\n- numpy>=1.17.2 (https://numpy.org/)\n- pandas>=0.25.3 (https://pandas.pydata.org/)\n- scikit-learn>=0.22.1 (https://scikit-learn.org/)\n- torch>=1.9.0 (https://pytorch.org/)\n- scipy>=1.4.1 (https://www.scipy.org/)\n\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    }
  ],
  "somef_missing_categories": [
    "acknowledgement",
    "run",
    "download",
    "contact",
    "contributors",
    "faq",
    "support",
    "identifier",
    "has_build_file"
  ],
  "somef_provenance": {
    "date": "2024-10-04 12:10:25",
    "somef_schema_version": "1.0.0",
    "somef_version": "0.9.5"
  },
  "stargazers_count": [
    {
      "confidence": 1,
      "result": {
        "type": "Number",
        "value": 2
      },
      "technique": "GitHub_API"
    }
  ],
  "usage": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Usage",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />"
        ],
        "type": "Text_excerpt",
        "value": "The full pipeline (see blow) assumes that you have a scRNA dataset (SC) and spatial transcriptomics dataset (ST) that both are formatted as .h5ad (AnnData data structures). Please see https://anndata.readthedocs.io/ for information about how to structure your data. Alternative you can check out the tutorial https://github.com/HealthML/AntiSplodge_Turorial for an example on how to do this.\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Standard full pipeline",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "```python\nimport antisplodge as AS\n# SC should be the single-cell dataset formatted as .h5ad (AnnData)\nExp = AS.DeconvolutionExperiment(SC) \nExp.setVerbosity(True)\n\n# CELLTYPE_COLUMN should be replaced with actual column\nExp.setCellTypeColumn('CELLTYPE_COLUMN') \n# Use 80% as train data and split the rest into a 50/50 split validation and testing\nExp.splitTrainTestValidation(train=0.8, rest=0.5)\n\n# Generate profiles, num_profiles = [#training, #validation, #testing]\n# This will construct 100.000 training profiles, 10.000 validation profiles, and, 10.000 test profiles\n# All profiles will be generated from 10 cell profiles (CD=10)\n# for train, validation and test (respectively)\nExp.generateTrainTestValidation(num_profiles=[100000,10000,10000], CD=[10,10])\n\n# Load the profiles into data loaders\nExp.setupDataLoaders()\n\n# Initialize Neural network-model and allocate it to the cuda_id specified\n# Use 'cuda_id=\"cpu\"' if you want to allocate it to a cpu\nExp.setupModel(cuda_id=6)\nExp.setupOptimizerAndCriterion(learning_rate = 0.001)\n\n# Train the model using the profiles generated \n# The patience parameter determines how long it will run without fining a new better (lower) error \n# The weights found will be saved to 'NNDeconvolver.pt' and will be autoloaded once the training is complete \nstats = AS.train(Exp, save_file=\"NNDeconvolver.pt\", patience=100)\n\n# print the mean JSD for train, validation, and test\nprint(AS.getMeanJSD(Exp, \"train\"), AS.getMeanJSD(Exp, \"validation\"), AS.getMeanJSD(Exp, \"test\"))\n\n#\n# Afterwards do prediction\n#\n\n# Assuming we have a spatial transcriptomics dataset ST formatted in .h5ad (AnnData)\n# create dataloader so that we can predict the profiles of each spot in our ST dataset\ndataset_spots = AS.SingleCellDataset(torch.from_numpy(np.array(ST.X.toarray())).float(), torch.from_numpy(np.array([0]*ST.n_obs)).float())\nspots_loader = DataLoader(dataset=dataset_spots,\n                      batch_size=50, # batch_size doesn't matter \n)\n\nspot_preds = AS.predict(Exp, spots_loader) # predict spots\n# The results for each ST profile (spot) is now in spot_preds and can be used for further analysis \n```\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Order of execution",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "1. **Start an experiment**: `Exp = AS.DeconvolutionExperiment(SC)` must be the first call. \n\n2. **Define datasets based on the SC dataset**: `Exp.splitTrainTestValidation(train=0.8, rest=0.5)` must be called before \n`Exp.generateTrainTestValidation(num_profiles=[10000,5000,1000], CD=[1,10])`.\n\n3. **Setup model and optimizers**: `Exp.setupModel(cuda_id=6)` must be called before \n`Exp.setupOptimizerAndCriterion(learning_rate = 0.001)`. Each time `setupModel` is called, `Exp.setupOptimizerAndCriterion` must be called again, as optimizers and criterions are bound to the model, for use during training. \n\n4. **Train the model**: `stats = AS.train(Exp, save_file=\"NNDeconvolver.pt\", patience=100)`.\n\n4. **Predict spots using the model**: `spot_preds = AS.predict(Exp, spots_loader)`.\n\nThe order of execution must be in the order listed above. \n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Minimal Example",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Useful snippets",
          "Tutorial"
        ],
        "type": "Text_excerpt",
        "value": "For trying out AntiSplodge we recommed starting with a minimal example using the cells located at the heart cell atlas (https://www.heartcellatlas.org/). \n\nYou can find the notebook in this repository: [AntiSplodge_minimal_example.ipynb](AntiSplodge_minimal_example.ipynb)\n\nIn this particular small example, we achieve a test accuracy of 7.974431% for nuclei scRNA sequencing, which is a better accuracy than what most state-of-the-art tools currently can demonstrate. \n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "More in-depth tutorial",
        "parent_header": [
          "AntiSplodge <img alt=\"MIT License\" src=\"https://img.shields.io/badge/license-MIT%20License-blue.svg\" /> <img alt=\"CC BY 4.0\" src=\"https://img.shields.io/badge/license-CC%20BY%204.0-blue.svg\" />",
          "Useful snippets",
          "Tutorial"
        ],
        "type": "Text_excerpt",
        "value": "Check out the tutorial located at: https://github.com/HealthML/AntiSplodge_Turorial. This will give you a full tour from preprocessing to deconvoluting by predicting cell type proportions of the spatial transcriptomics spots.\n"
      },
      "source": "https://raw.githubusercontent.com/HealthML/AntiSplodge/main/README.md",
      "technique": "header_analysis"
    }
  ]
}