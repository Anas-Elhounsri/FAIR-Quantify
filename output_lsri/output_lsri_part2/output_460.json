{
  "application_domain": [
    {
      "confidence": 0.9499445381900721,
      "result": {
        "type": "String",
        "value": "Graphs"
      },
      "technique": "supervised_classification"
    }
  ],
  "citation": [
    {
      "confidence": 1,
      "result": {
        "original_header": "References",
        "parent_header": [
          "COLLAPSE"
        ],
        "type": "Text_excerpt",
        "value": "If you use COLLAPSE, please cite our manuscript:\n\n> Derry, A., & Altman, R. B. (2022). COLLAPSE: A representation learning framework for identification and characterization of protein structural sites. Protein Science 32(2). e4541. https://doi.org/10.1002/pro.4541."
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "header_analysis"
    }
  ],
  "code_repository": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/awfderry/COLLAPSE"
      },
      "technique": "GitHub_API"
    }
  ],
  "date_created": [
    {
      "confidence": 1,
      "result": {
        "type": "Date",
        "value": "2022-07-15T18:53:57Z"
      },
      "technique": "GitHub_API"
    }
  ],
  "date_updated": [
    {
      "confidence": 1,
      "result": {
        "type": "Date",
        "value": "2024-06-08T02:33:59Z"
      },
      "technique": "GitHub_API"
    }
  ],
  "description": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "Representation learning for protein functional site analysis"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 0.9295494330866468,
      "result": {
        "original_header": "COLLAPSE",
        "type": "Text_excerpt",
        "value": "COLLAPSE (COmpressed Latents Learned from Aligned Protein Structural Environments) is a representation learning method for protein structural and functional sites, as described in Derry et al. (2022). This repo contains all package functionality as well as scripts for functional site search and annotation, pre-training, and transfer learning on Prosite and ATOM3D datasets. For more details on COLLAPSE, please see our [paper](https://onlinelibrary.wiley.com/doi/10.1002/pro.4541). Preprint is also freely available on [BioRxiv](https://www.biorxiv.org/content/10.1101/2022.07.20.500713v2). \nThe repo is organized as follows: \n  - `./collapse`: package source code and core functionality\n  - `./scripts`: Python scripts and notebooks used in our paper.\n  - `./data`: datasets, model checkpoints, etc. \n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "supervised_classification"
    }
  ],
  "download": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Downloading datasets",
        "parent_header": [
          "COLLAPSE"
        ],
        "type": "Text_excerpt",
        "value": "Datasets are hosted on [Zenodo](https://zenodo.org/record/6903423). The following datasets are available for download depending on your use case.\n\n- `background_stats.tar.gz`: folder containing background distributions and statistics (needed for annotation and search applications)\n- `checkpoints.tar.gz`: folder containing Pytorch checkpoints for model parameters (needed for all applications)\n- `full_site_db_stats.pkl`: pickle file containing functional site embedding database with data from Prosite + CSA (needed for annotation application)\n- `pdb_embeddings.pkl`: pickle file containing embeddings of all residues in 100% redundant subset of PDB chains (needed for search application)\n- `pdb100_embeddings.tar.gz`: folder containing PDB100 embeddings, both pickle file above and LMDB format containing all embeddings, atom information, and metadata (very file, mostly useful for deriving new data subsets)\n\nTo download the dataset, download directly from Zenodo or use the following script, where FILENAME is the name of the file in Zenodo (e.g. `checkpoints.tar.gz`):\n\n```\ncd data\nbash download_data.sh FILENAME\n```\n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "header_analysis"
    }
  ],
  "download_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/awfderry/COLLAPSE/releases"
      },
      "technique": "GitHub_API"
    }
  ],
  "forks_count": [
    {
      "confidence": 1,
      "result": {
        "type": "Number",
        "value": 2
      },
      "technique": "GitHub_API"
    }
  ],
  "forks_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://api.github.com/repos/awfderry/COLLAPSE/forks"
      },
      "technique": "GitHub_API"
    }
  ],
  "full_name": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "awfderry/COLLAPSE"
      },
      "technique": "GitHub_API"
    }
  ],
  "full_title": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "COLLAPSE"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "regular_expression"
    }
  ],
  "has_script_file": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/install_dependencies.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/install_dependencies_cpu.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/data/download_data.sh"
      },
      "technique": "file_exploration"
    }
  ],
  "images": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/collapse_schematic.png"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "regular_expression"
    }
  ],
  "installation": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Installation",
        "parent_header": [
          "COLLAPSE"
        ],
        "type": "Text_excerpt",
        "value": "Install the package using pip:\n\n```\npip install .\n```\n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 0.8495945287622009,
      "result": {
        "original_header": "COLLAPSE",
        "type": "Text_excerpt",
        "value": "The repo is organized as follows: \n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "supervised_classification"
    }
  ],
  "issue_tracker": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://api.github.com/repos/awfderry/COLLAPSE/issues"
      },
      "technique": "GitHub_API"
    }
  ],
  "keywords": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": ""
      },
      "technique": "GitHub_API"
    }
  ],
  "license": [
    {
      "confidence": 1,
      "result": {
        "name": "MIT License",
        "spdx_id": "MIT",
        "type": "License",
        "url": "https://api.github.com/licenses/mit",
        "value": "https://api.github.com/licenses/mit"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "type": "File_dump",
        "value": "MIT License\n\nCopyright (c) 2022 Alexander Derry\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/LICENSE",
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "License",
        "parent_header": [
          "COLLAPSE"
        ],
        "type": "Text_excerpt",
        "value": "This project is licensed under the [MIT license](LICENSE)\n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "header_analysis"
    }
  ],
  "name": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "COLLAPSE"
      },
      "technique": "GitHub_API"
    }
  ],
  "owner": [
    {
      "confidence": 1,
      "result": {
        "type": "User",
        "value": "awfderry"
      },
      "technique": "GitHub_API"
    }
  ],
  "programming_languages": [
    {
      "confidence": 1,
      "result": {
        "name": "Python",
        "size": 152433,
        "type": "Programming_language",
        "value": "Python"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "name": "Shell",
        "size": 1213,
        "type": "Programming_language",
        "value": "Shell"
      },
      "technique": "GitHub_API"
    }
  ],
  "readme_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md"
      },
      "technique": "file_exploration"
    }
  ],
  "related_documentation": [
    {
      "confidence": 1,
      "result": {
        "format": "readthedocs",
        "type": "Url",
        "value": "https://atom3d.readthedocs.io/"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "regular_expression"
    }
  ],
  "requirements": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Requirements",
        "parent_header": [
          "COLLAPSE"
        ],
        "type": "Text_excerpt",
        "value": "We recommend installing COLLAPSE in a Conda environment (tested with GCC version 10.1.0). To create and activate your Conda environment, run the following:\n\n```\nconda create -n collapse python=3.9\nconda activate collapse\n```\n\nTo download required packages on a machine with GPU with CUDA v11.7 (recommended), run the following script:\n\n```\n./install_dependencies.sh\n```\n\nFor CPU-only functionality, you can run the following:\n\n```\n./install_dependencies_cpu.sh\n```\n\nScripts may require additional dependencies, which may be installed using conda or pip as needed.\n\n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "header_analysis"
    }
  ],
  "somef_missing_categories": [
    "acknowledgement",
    "run",
    "contact",
    "contributors",
    "documentation",
    "faq",
    "support",
    "identifier",
    "has_build_file",
    "executable_example"
  ],
  "somef_provenance": {
    "date": "2024-10-04 10:47:06",
    "somef_schema_version": "1.0.0",
    "somef_version": "0.9.5"
  },
  "stargazers_count": [
    {
      "confidence": 1,
      "result": {
        "type": "Number",
        "value": 8
      },
      "technique": "GitHub_API"
    }
  ],
  "usage": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Usage",
        "parent_header": [
          "COLLAPSE"
        ],
        "type": "Text_excerpt",
        "value": "Here we provide usage examples for several applications of COLLAPSE.\n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Embed all residues in a PDB file",
        "parent_header": [
          "COLLAPSE",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "To embed all residues in a single structure using COLLAPSE, use the following lines of code. \nHere, `PDB_FILE` is the path to the PDB file containing the structure to be embedded, and `DEVICE` specifies where you want the embedding to run: `cpu` (default) or `cuda`\nIn this example, we only embed chain \"A\" and include all heteroatoms (ligands, ions, and cofactors).\n\n```\nfrom collapse import process_pdb, initialize_model, embed_protein\n\n# Create model and load default parameters (pre-trained COLLAPSE model)\nmodel = initialize_model(device=DEVICE)\n# Load PDB file and pre-process to dataframe representation\natom_df = process_pdb(PDB_FILE, chain='A')\n# Embed protein, returning dictionary of embeddings and metadata\nemb_data = embed_protein(atom_df, model, include_hets=True, device=DEVICE)\n```\n\nThe output of `embed_protein` is a dictionary containing the following data:\n- `embeddings`: A numpy matrix (N x 512) containing embeddings of all N residues in protein.\n- `resids`: List of length N containing residue IDs for each embedding, (e.g. A412, K23)\n- `chains`: List of length N containing chain IDs for each embedding\n- `confidence`: List of length N containing per-residue pLDDT scores (AlphaFold structures only)\n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Embed entire dataset of PDB files",
        "parent_header": [
          "COLLAPSE",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "To embed all residues of all structures in a directory of PDB files, use the following script. \n`PDB_DIR` is the root directory of all the PDB files to be processed, possibly containing subdirectories. Accepted formats include `pdb`,  `pdb.gz`, and `cif`.\n`OUT_DIR` is the location of the processed dataset.\n\n```\npython embed_pdb_dataset.py PDB_DIR OUT_DIR --filetype pdb\n```\n\nThis script produces an embedding dataset in the LMDB format, allowing for compressed, fast, random access to all elements in the database, in which data is stored in a key-value format. Each element of the dataset produced by `embed_pdb_dataset.py` has the same keys as the outpute of `embed_protein` (see above), in addition to the following data from the initial PDB file:\n  - `id`: The original PDB filename\n  - `atoms`: The original PDB data, in [ATOM3D dataframe format](https://atom3d.readthedocs.io/en/latest/data_formats.html#the-atoms-dataframe)\n\nTo load this dataset in a Pytorch-style dataset format, you can use ATOM3D:\n\n```\nfrom atom3d.datasets import load_dataset\ndataset = load_dataset(OUT_DIR, 'lmdb')\n```\n\nAdditional arguments are:\n- `--checkpoint` (default `./data/checkpoints/collapse_base.pt`): To specify a different checkpoint with pre-trained model parameters.\n- `--split_id` (default 0): For processing dataset in chunks (useful for very large datasets), specify the split index. Must be less than `num_splits`.\n- `--num_splits` (default 1): For processing dataset in chunks (useful for very large datasets), total number of splits.\n\nIf processing in chunks, each chunk of the processed dataset is stored in a `tmp_` directory. To combine these into a full processed dataset, you can use the following script from ATOM3D:\n\n```\npython -m atom3d.datasets.scripts.combine_lmdb OUT_DIR/tmp_* OUT_DIR/full\n```\n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Iterative search of functional site against PDB database",
        "parent_header": [
          "COLLAPSE",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "Given the structural site defined by a specific residue in a PDB file, you can search against a structure database using the following command.\n\n```\npython search_site.py PDB_FILE CHAIN RESID DATABASE\n```\n\nAdditional arguments are:\n- `--checkpoint` (default `./data/checkpoints/collapse_base.pt`): To specify a different checkpoint with pre-trained model parameters.\n- `--outfile` (default `PDBID_CHAIN_RESID_search.csv`): CSV file to save output.\n- `--cutoff` (default `1e-4`): Significance cutoff for keeping hits at each search iteration.\n- `--num_iter` (default `3`): Number of search iterations.\n- `--include_hets`: Flag indicating whether to include heteroatoms, such as ligands, ions, and cofactors, in the input PDB. Hydrogens and waters are always removed.\n- `--verbose`: flag for whether or not to print progress during search.\n\nOutput file is a CSV with resulting PDBs, residue IDs, protein metadata, quantile-transformed cosine similarity, and the iteration and query where the result first appeared. The first row contains the query structure and residue ID.\n\nExample:\n```\npython search_site.py data/examples/1a0h.pdb B H363 data/datasets/pdb100_embeddings/pdb_embeddings.pkl --cutoff 1e-3 --verbose --num_iter 3\n```\n\n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Annotate structure using functional site database",
        "parent_header": [
          "COLLAPSE",
          "Usage"
        ],
        "type": "Text_excerpt",
        "value": "\nTo annotate chains A and B in the structure stored in PDB_FILE, use the following command. The output will be a printed summary of the functional sites detected and the corresponding residues. You can also supply more than one PDB file to be annotated, each separated by a space. By default, the functional site database contains conserved residues from Prosite and the Catalytic Site Atlas (CSA).\n\n```\npython annotate_pdb.py PDB_FILE --chains AB\n```\n\nAdditional arguments are:\n- `--checkpoint` (default `./data/checkpoints/collapse_base.pt`): To specify a different checkpoint with pre-trained model parameters.\n- `--db` (default `.data/full_site_db_stats.pkl`): Functional site embedding database to use, by default a combination of Prosite and CSA. Any database can be used as long as it is in the same pickled key-value format (see below).\n- `--cutoff` (default 1e-4): Empirical p-value cutoff for selecting residues with significant similarity to a functional site. Reducing this will increase precision at the cost of potentially decreasing sensitivity.\n- `--site_cutoff` (default 1e-4): Empirical p-value cutoff for selecting sites with significant similarity for mutual best-hits criterion. Reducing this will increase precision at the cost of potentially decreasing sensitivity.\n- `--filetype` (default `pdb`): File type of input files (must all be the same filetype).\n- `--include_hets`: Flag indicating whether to include heteroatoms, such as ligands, ions, and cofactors, in the input PDB. Hydrogens and waters are always removed.\n- `--verbose`: Flag indicating whether to print all PDB and residue hits in results. By default, only the total number of PDBs is shown.\n\n"
      },
      "source": "https://raw.githubusercontent.com/awfderry/COLLAPSE/main/README.md",
      "technique": "header_analysis"
    }
  ]
}