{
  "citation": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Citation:",
        "parent_header": [
          "AGNOSTOS - workflow",
          "Test dataset"
        ],
        "type": "Text_excerpt",
        "value": "Vanni, C., Schechter, M., Acinas, S., Barber\u00e1n, A., Buttigieg, P. L., Casamayor, E. O., Delmont, T. O., Duarte, C. M., Murat Eren, A., Finn, R., Kottmann, R., Mitchell, A., Sanchez, P., Siren, K., Steinegger, M., Gl\u00f6ckner, F. O., & Fernandez-Guerra, A. Unifying the known and unknown microbial coding sequence space. eLife 2022. [https://doi.org/10.7554/eLife.67667](https://doi.org/10.7554/eLife.67667)\n"
      },
      "source": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/README.md",
      "technique": "header_analysis"
    }
  ],
  "code_repository": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/functional-dark-side/agnostos-wf"
      },
      "technique": "GitHub_API"
    }
  ],
  "date_created": [
    {
      "confidence": 1,
      "result": {
        "type": "Date",
        "value": "2020-03-29T11:04:00Z"
      },
      "technique": "GitHub_API"
    }
  ],
  "date_updated": [
    {
      "confidence": 1,
      "result": {
        "type": "Date",
        "value": "2024-06-03T13:45:45Z"
      },
      "technique": "GitHub_API"
    }
  ],
  "description": [
    {
      "confidence": 0.9931770655428869,
      "result": {
        "original_header": "Disclaimer: This is a work in progress!",
        "type": "Text_excerpt",
        "value": "The workflow is still under development and it is subject to change. No guarantee is made regarding the functioning of the workflow and the accuracy of the results. Please, contact us in case you are interested in using it.\n \n"
      },
      "source": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/README.md",
      "technique": "supervised_classification"
    },
    {
      "confidence": 0.9316317579692981,
      "result": {
        "original_header": "Test dataset",
        "type": "Text_excerpt",
        "value": "A brief description of the dataset is available on Figshare. \nAs additional option you can specify an additional file using \"--info\". This file should be a table with the correspondence of the genes to the contigs and genomes/MAGs or samples. The format should be gene - contig - genome (or sample_ID) - optional-info. \n"
      },
      "source": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/README.md",
      "technique": "supervised_classification"
    },
    {
      "confidence": 0.842984002092997,
      "result": {
        "original_header": "THE FUNCTIONAL DARK SIDE OF GENOMES AND METAGENOMES",
        "type": "Text_excerpt",
        "value": "To learn more about what we are doing check out our website  [dark.metagenomics.eu](https://dark.metagenomics.eu/). \n"
      },
      "source": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/README.md",
      "technique": "supervised_classification"
    }
  ],
  "documentation": [
    {
      "confidence": 1,
      "result": {
        "format": "wiki",
        "type": "Url",
        "value": "https://github.com/functional-dark-side/agnostos-wf/wiki"
      },
      "source": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/README.md",
      "technique": "regular_expression"
    }
  ],
  "download_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/functional-dark-side/agnostos-wf/releases"
      },
      "technique": "GitHub_API"
    }
  ],
  "forks_count": [
    {
      "confidence": 1,
      "result": {
        "type": "Number",
        "value": 15
      },
      "technique": "GitHub_API"
    }
  ],
  "forks_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://api.github.com/repos/functional-dark-side/agnostos-wf/forks"
      },
      "technique": "GitHub_API"
    }
  ],
  "full_name": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "functional-dark-side/agnostos-wf"
      },
      "technique": "GitHub_API"
    }
  ],
  "full_title": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": ""
      },
      "source": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/README.md",
      "technique": "regular_expression"
    }
  ],
  "has_script_file": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/installation_script.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/download_DBs.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/categ_hhparser_small.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/consensus.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/clean_aa_seqs.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/remove_orfs.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/mmseqs_double_search.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/categ_hhparser.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/hhpfam_parser.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/hh_parser.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/reformat_file.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/compositional_validation.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/cluster_naming.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/collect_val_results.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/kaiju_taxonomy.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/concatenate_cludb.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/category_db_files.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/hhmake.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/hhblits_search_parser.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/workflow/scripts/hmmsearch_res_parser.sh"
      },
      "technique": "file_exploration"
    },
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/Profile_search/profile_search.sh"
      },
      "technique": "file_exploration"
    }
  ],
  "images": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master//assets/unkn_fig1.png"
      },
      "source": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/README.md",
      "technique": "regular_expression"
    }
  ],
  "installation": [
    {
      "confidence": 1.0,
      "result": {
        "original_header": "Test dataset",
        "type": "Text_excerpt",
        "value": "Set of 10K contigs to test the DB-creation module and 5K contigs to test the DB-update module of the workflow.\nThe test-dataset can be downloaded from Figshare as follows:\n```{bash}\nmkdir -p agnostos_test\ncd agnostos_test\nwget https://figshare.com/ndownloader/files/31247614 -O db_creation_data.tar.gz\ntar -xzvf db_creation_data.tar.gz\n\nwget https://ndownloader.figshare.com/files/25473335 -O db_update_data.tar.gz\ntar -xzvf db_update_data.tar.gz\n```\n \n**Profile-search**: the profile-search vs the AgnostosDB cluster HMM profiles database is not part of the Snakemake workflow. However, if you want to search your set of genes against our profiles you just need to download the AGNOSTOS [gene cluster profiles](https://figshare.com/ndownloader/files/30998305) and the [gene cluster categories](https://ndownloader.figshare.com/files/23067140) and make sure you have [MMseqs2](https://github.com/soedinglab/MMseqs2) installed.\nThe scripts can be found in the [Profile_search/](Profile_search) folder.\nTo run the search you just need the following command:\n```{bash}\n# download the AGNOSTOS seed database gene cluster profiles\nwget https://figshare.com/ndownloader/files/30998305 -O mmseqs_profiles.tar.gz\ntar -xzvf mmseqs_profiles.tar.gz\n\n# download the AGNOSTOS seed database gene cluster categories\nwget https://ndownloader.figshare.com/files/23067140 -O cluster_ids_categ.tsv.gz\ngunzip cluster_ids_categ.tsv.gz\n\nProfile_search/profile_search.sh --query your-genes.fasta --clu_hmm mmseqs_profiles/clu_hmm_db --clu_cat cluster_ids_categ.tsv --mmseqs /path/to/mmseqs --mpi FALSE --threads 8\n```\n \n"
      },
      "source": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/README.md",
      "technique": "supervised_classification"
    }
  ],
  "issue_tracker": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://api.github.com/repos/functional-dark-side/agnostos-wf/issues"
      },
      "technique": "GitHub_API"
    }
  ],
  "keywords": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": ""
      },
      "technique": "GitHub_API"
    }
  ],
  "name": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "agnostos-wf"
      },
      "technique": "GitHub_API"
    }
  ],
  "owner": [
    {
      "confidence": 1,
      "result": {
        "type": "Organization",
        "value": "functional-dark-side"
      },
      "technique": "GitHub_API"
    }
  ],
  "programming_languages": [
    {
      "confidence": 1,
      "result": {
        "name": "R",
        "size": 207916,
        "type": "Programming_language",
        "value": "R"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "name": "Python",
        "size": 155414,
        "type": "Programming_language",
        "value": "Python"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "name": "Shell",
        "size": 44673,
        "type": "Programming_language",
        "value": "Shell"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "name": "C",
        "size": 9566,
        "type": "Programming_language",
        "value": "C"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "name": "Awk",
        "size": 1395,
        "type": "Programming_language",
        "value": "Awk"
      },
      "technique": "GitHub_API"
    }
  ],
  "readme_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/README.md"
      },
      "technique": "file_exploration"
    }
  ],
  "releases": [
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "ChiaraVanni",
          "type": "User"
        },
        "date_created": "2022-06-16T13:01:24Z",
        "date_published": "2022-06-17T07:57:59Z",
        "description": "Second agnostos-wf release.\r\n\r\n### Notable changes:\r\n\r\n1. The workflow general structure slightly changed since the first release: the DB-creation and DB-update modules are now gathered into one workflow folder and to switch between them you just need to specify the module in the [config.yaml](workflow/config.yaml) file.\r\n\r\n2. It is now possible to classify the singletons into the 4 categories (K, KWP, GU and EU) by setting `singl: \"true\"` in the [config.yaml](workflow/config.yaml) file.\r\n\r\n3. It is now also possible to re-validate and classify the existing GCs that got integrated with new genes by setting\r\n`eval_shared: \"true\"` in the [config.yaml](workflow/config.yaml) file. At the moment, all shared GCs is the default (`shared_type: \"all\"`), other possibilities are: \"discarded\" for reprocessing all the previously discarded GCs with new sequences and \"increase\" for reprocessing all the shared GCs with 30% new sequences.\r\n\r\n4. The required databases can be downloaded and then removed in each step, to reduced the amount of space needed by the workflow (`db_mode: \"memory\"`).\r\n",
        "html_url": "https://github.com/functional-dark-side/agnostos-wf/releases/tag/v1.1",
        "name": "Release 1.1",
        "release_id": 69613712,
        "tag": "v1.1",
        "tarball_url": "https://api.github.com/repos/functional-dark-side/agnostos-wf/tarball/v1.1",
        "type": "Release",
        "url": "https://api.github.com/repos/functional-dark-side/agnostos-wf/releases/69613712",
        "value": "https://api.github.com/repos/functional-dark-side/agnostos-wf/releases/69613712",
        "zipball_url": "https://api.github.com/repos/functional-dark-side/agnostos-wf/zipball/v1.1"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "ChiaraVanni",
          "type": "User"
        },
        "date_created": "2020-12-03T10:57:40Z",
        "date_published": "2021-02-23T17:34:32Z",
        "description": "First agnostos-wf release",
        "html_url": "https://github.com/functional-dark-side/agnostos-wf/releases/tag/v1.0",
        "name": "First release",
        "release_id": 38501140,
        "tag": "v1.0",
        "tarball_url": "https://api.github.com/repos/functional-dark-side/agnostos-wf/tarball/v1.0",
        "type": "Release",
        "url": "https://api.github.com/repos/functional-dark-side/agnostos-wf/releases/38501140",
        "value": "https://api.github.com/repos/functional-dark-side/agnostos-wf/releases/38501140",
        "zipball_url": "https://api.github.com/repos/functional-dark-side/agnostos-wf/zipball/v1.0"
      },
      "technique": "GitHub_API"
    }
  ],
  "run": [
    {
      "confidence": 1,
      "result": {
        "original_header": "WARNING: UPDATES!",
        "parent_header": [
          "AGNOSTOS - workflow",
          "Run the workflow:"
        ],
        "type": "Text_excerpt",
        "value": "1. The workflow general structure slightly changed since the first release: the DB-creation and DB-update modules are now gathered into one workflow folder and to switch between them you just need to specify the module in the [config.yaml](workflow/config.yaml) file.\n2. It is now possible to classify the singletons into the 4 categories (K, KWP, GU and EU) by setting `singl: \"true\"` in the [config.yaml](workflow/config.yaml) file.\n3. It is also possible to re-validate and classify the existing GCs that got integrated with new genes by setting\n`eval_shared: \"true\"` in the [config.yaml](workflow/config.yaml) file. At the moment, all shared GCs is the default (`shared_type: \"all\"`), other possibilities are: \"discarded\" for reprocessing all the previously discarded GCs with new sequences and \"increase\" for reprocessing all the shared GCs with 30% new sequences.\n4. The databases can be downloaded and then removed in each step, to reduced the amount of space needed by the workflow (`db_mode: \"memory\"`)\n\n\n**1. The DB-creation module** starts from a set of genomic/metagenomic contigs in fasta format and retrieves a database of categorised gene clusters and cluster communities.\n\n```{bash}\ncd workflow/\nsnakemake --use-conda -j 100 --config module=\"creation\" --cluster-config config/cluster.yaml --cluster \"sbatch --export=ALL -t {cluster.time} -c {threads} --ntasks-per-node {cluster.ntasks_per_node} --nodes {cluster.nodes} --cpus-per-task {cluster.cpus_per_task} --job-name {rulename}.{jobid} --partition {cluster.partition}\" -R --until creation_workflow_report\n```\n\n**2. The DB-Update module** is used to add your genomic/metagenomic contigs or genes to an existing gene cluster database such as the agnostosDB dataset, which is stored in Figshare (https://doi.org/10.6084/m9.figshare.12459056) and publicly available for download. In case you cannot download the whole dataset, seen to the large size of many of the files, the workflow will download the necessary files for each step and it will then remove them. A description of the agnostosDB files can be found in the [AgnostosDB_README.md](AgnostosDB_README.md).\n\n- To run the DB-update module of the workflow, you just need to enter the folder, modify the [config.yaml](workflow/config/config.yaml) and [config_communities.yml](workflow/config/config_communities.yml) files specifying your input data and the output paths (see [usage file](AGNOSTOS_usage.md)), and then run the same command shown above, this time modifying the configuration parameter 'module' to \"update\":\n\n```{bash}\ncd workflow/\nsnakemake -s Snakefile --use-conda -j 100 --config module=\"update\" --cluster-config config/cluster.yaml --cluster \"sbatch --export=ALL -t {cluster.time} -c {threads} --ntasks-per-node {cluster.ntasks_per_node} --nodes {cluster.nodes} --cpus-per-task {cluster.cpus_per_task} --job-name {rulename}.{jobid} --partition {cluster.partition}\" -R --until update_workflow_report\n```\n\nNB:  If you want to run the DB-update module on the results of the DB-creation module, first copy or move the cluster database in the final DB-creation result folder as follows:\n\n```{bash}\nmv db_creation/mmseqs_clustering db_creation/clusterDB_results/\n```\n\n<br>\n\n**Output**\n\nThe output of these 2 modules is described in the [Output_README.md](Output_README.md).\n\n<br>\n"
      },
      "source": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/README.md",
      "technique": "header_analysis"
    }
  ],
  "somef_missing_categories": [
    "acknowledgement",
    "download",
    "requirements",
    "contact",
    "contributors",
    "license",
    "faq",
    "support",
    "identifier",
    "has_build_file",
    "executable_example"
  ],
  "somef_provenance": {
    "date": "2024-10-06 06:21:33",
    "somef_schema_version": "1.0.0",
    "somef_version": "0.9.5"
  },
  "stargazers_count": [
    {
      "confidence": 1,
      "result": {
        "type": "Number",
        "value": 43
      },
      "technique": "GitHub_API"
    }
  ],
  "usage": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Snakemake workflow usage:",
        "parent_header": [
          "AGNOSTOS - workflow"
        ],
        "type": "Text_excerpt",
        "value": "The \"agnostos-wf\" snakemake workflow was developed using/runs in the de.NBI Cloud.\nWe used a cluster setup with 10 nodes of 28 cores and 252 G of memory each.\nThe cluster was build using BiBiGrid and it is using SLURM as Grid Batch Scheduler.\n"
      },
      "source": "https://raw.githubusercontent.com/functional-dark-side/agnostos-wf/master/README.md",
      "technique": "header_analysis"
    }
  ]
}