{
  "citation": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Reference",
        "type": "Text_excerpt",
        "value": "[G. Cappon, M. Vettoretti, G. Sparacino, S. Del Favero, A. Facchinetti, \"ReplayBG: a digital twin-based methodology to identify a personalized model from type 1 diabetes data and simulate glucose concentrations to assess alternative therapies\", IEEE Transactions on Biomedical Engineering, 2023, DOI: 10.1109/TBME.2023.3286856.](https://ieeexplore.ieee.org/document/10164140)\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    }
  ],
  "code_of_conduct": [
    {
      "confidence": 1,
      "result": {
        "type": "File_dump",
        "value": "# Contributor Covenant Code of Conduct\n\n## Our Pledge\n\nWe as members, contributors, and leaders pledge to make participation in our\ncommunity a harassment-free experience for everyone, regardless of age, body\nsize, visible or invisible disability, ethnicity, sex characteristics, gender\nidentity and expression, level of experience, education, socio-economic status,\nnationality, personal appearance, race, religion, or sexual identity\nand orientation.\n\nWe pledge to act and interact in ways that contribute to an open, welcoming,\ndiverse, inclusive, and healthy community.\n\n## Our Standards\n\nExamples of behavior that contributes to a positive environment for our\ncommunity include:\n\n* Demonstrating empathy and kindness toward other people\n* Being respectful of differing opinions, viewpoints, and experiences\n* Giving and gracefully accepting constructive feedback\n* Accepting responsibility and apologizing to those affected by our mistakes,\n  and learning from the experience\n* Focusing on what is best not just for us as individuals, but for the\n  overall community\n\nExamples of unacceptable behavior include:\n\n* The use of sexualized language or imagery, and sexual attention or\n  advances of any kind\n* Trolling, insulting or derogatory comments, and personal or political attacks\n* Public or private harassment\n* Publishing others' private information, such as a physical or email\n  address, without their explicit permission\n* Other conduct which could reasonably be considered inappropriate in a\n  professional setting\n\n## Enforcement Responsibilities\n\nCommunity leaders are responsible for clarifying and enforcing our standards of\nacceptable behavior and will take appropriate and fair corrective action in\nresponse to any behavior that they deem inappropriate, threatening, offensive,\nor harmful.\n\nCommunity leaders have the right and responsibility to remove, edit, or reject\ncomments, commits, code, wiki edits, issues, and other contributions that are\nnot aligned to this Code of Conduct, and will communicate reasons for moderation\ndecisions when appropriate.\n\n## Scope\n\nThis Code of Conduct applies within all community spaces, and also applies when\nan individual is officially representing the community in public spaces.\nExamples of representing our community include using an official e-mail address,\nposting via an official social media account, or acting as an appointed\nrepresentative at an online or offline event.\n\n## Enforcement\n\nInstances of abusive, harassing, or otherwise unacceptable behavior may be\nreported to the community leaders responsible for enforcement at\ngiacomo.cappon@unipd.it.\nAll complaints will be reviewed and investigated promptly and fairly.\n\nAll community leaders are obligated to respect the privacy and security of the\nreporter of any incident.\n\n## Enforcement Guidelines\n\nCommunity leaders will follow these Community Impact Guidelines in determining\nthe consequences for any action they deem in violation of this Code of Conduct:\n\n### 1. Correction\n\n**Community Impact**: Use of inappropriate language or other behavior deemed\nunprofessional or unwelcome in the community.\n\n**Consequence**: A private, written warning from community leaders, providing\nclarity around the nature of the violation and an explanation of why the\nbehavior was inappropriate. A public apology may be requested.\n\n### 2. Warning\n\n**Community Impact**: A violation through a single incident or series\nof actions.\n\n**Consequence**: A warning with consequences for continued behavior. No\ninteraction with the people involved, including unsolicited interaction with\nthose enforcing the Code of Conduct, for a specified period of time. This\nincludes avoiding interactions in community spaces as well as external channels\nlike social media. Violating these terms may lead to a temporary or\npermanent ban.\n\n### 3. Temporary Ban\n\n**Community Impact**: A serious violation of community standards, including\nsustained inappropriate behavior.\n\n**Consequence**: A temporary ban from any sort of interaction or public\ncommunication with the community for a specified period of time. No public or\nprivate interaction with the people involved, including unsolicited interaction\nwith those enforcing the Code of Conduct, is allowed during this period.\nViolating these terms may lead to a permanent ban.\n\n### 4. Permanent Ban\n\n**Community Impact**: Demonstrating a pattern of violation of community\nstandards, including sustained inappropriate behavior,  harassment of an\nindividual, or aggression toward or disparagement of classes of individuals.\n\n**Consequence**: A permanent ban from any sort of public interaction within\nthe community.\n\n## Attribution\n\nThis Code of Conduct is adapted from the [Contributor Covenant][homepage],\nversion 2.0, available at\nhttps://www.contributor-covenant.org/version/2/0/code_of_conduct.html.\n\nCommunity Impact Guidelines were inspired by [Mozilla's code of conduct\nenforcement ladder](https://github.com/mozilla/diversity).\n\n[homepage]: https://www.contributor-covenant.org\n\nFor answers to common questions about this code of conduct, see the FAQ at\nhttps://www.contributor-covenant.org/faq. Translations are available at\nhttps://www.contributor-covenant.org/translations.\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/CODE_OF_CONDUCT.md",
      "technique": "file_exploration"
    }
  ],
  "code_repository": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/gcappon/replay-bg"
      },
      "technique": "GitHub_API"
    }
  ],
  "contributing_guidelines": [
    {
      "confidence": 1,
      "result": {
        "type": "File_dump",
        "value": "# Contributing to ReplayBG: A step-by-step guide\n\nThis guide is intended to describe the steps to follow to contribute to ReplayBG.\n\n## Step 1. It all starts from an issue\nIf you want to contribute to ReplayBG you can:\n\n* Open a new issue to request a *new feature* or to *report a bug* using the available issue templates  \n\n![Issue templates](https://i.postimg.cc/sXgG4mZW/issues-template.png)\n\n* Try to solve an open issue choosing between one of the available issues. <br>\n\n::: tip\nIf you are new to the concept of contributing to an open source repository, try to start from the issues labeled as ![good first issue](https://i.postimg.cc/hvxmXjdZ/good-first-issue.png).\n:::\n\n## Step 2: Fork, branch & code\n\nIf you decided to solve an opened issue (thank you m8) just comment the issue saying that you will get into solving the issue, and finally propose a due date.\n\nThe next step is to fork ReplayBG. So, from the ReplayBG repository homepage click the ![fork](https://i.postimg.cc/rFjmQxMC/fork.png) button in the upper right corner.\n\nThen, clone the forked repository in your local machine using: \n\n```BASH\ngit clone https://github.com/<YOUR_USERNAME>/replay-bg.git\n```\n\nand create a new branch from `master` using a proper name possibly \"connected\" the the issue you are solving (e.g., `fix-plot-bug`, or `new-fancy-features`), for example\n\n```BASH\ngit checkout -b new-fancy-feature\n```\n\nIt is now time to code. Solve the issue and commit your changes in your local branch once you have done using a proper commit message. In particular, it is a good practice to start the commit message with the branch name, between square brackets, and including the issue number at some point in the message. For example, if the issue you are solving is the #3 and the branch you are using to solve the issue is called `new-fancy-feature` a good commit could be:\n\n```BASH\ngit commit -a -m \"[new-fancy-feature] solves #3.\"\n```\n## Step 3: Push and make a pull request\n\nPush the committed changes to your forked online repository remembering to define the upstream of your new branch `new-fancy-feature`\n\n```BASH\ngit push --set-upstream origin new-fancy-feature\n```\n\nFinally, make a pull request to ReplayBG by clicking the ![pull request](https://i.postimg.cc/52Qh6W7Y/pull-request.png) button (can be found in the homepage of your forked repository in Github) and following the instructions. \n\n\n\n\n\n\n\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/CONTRIBUTING.md",
      "technique": "file_exploration"
    }
  ],
  "date_created": [
    {
      "confidence": 1,
      "result": {
        "type": "Date",
        "value": "2020-10-06T16:02:46Z"
      },
      "technique": "GitHub_API"
    }
  ],
  "date_updated": [
    {
      "confidence": 1,
      "result": {
        "type": "Date",
        "value": "2024-09-05T09:31:53Z"
      },
      "technique": "GitHub_API"
    }
  ],
  "description": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "ReplayBG is a digital twin-based methodology to assess new strategies for type 1 diabetes management."
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "The basics",
        "parent_header": [
          "Getting started",
          "Step 2: Use of ReplayBG for simulation"
        ],
        "type": "Text_excerpt",
        "value": "ReplayBG has different level of flexibility and can perform step 1 differently according to the user preferences. The easiest way to do this is calling the `replayBG` function as: \n\n```MATLAB\nreplayBG('identification', data, BW, scenario, saveName);\n```\nwhere:\n\n- `'identification'` specifies that the tool will be used to perform step 1, i.e., to identify the ReplayBG model on the given data\n- `data` is a timetable which contains the data to be used by the tool. MUST contain a column `glucose` that contains the glucose measurements (in mg/dl), a column `basal` that contains the basal insulin data (in U/min), a column `bolus` that contains the bolus insulin data (in U/min), a column `CHO` that contains the CHO intake data (in g/min). `data` MUST be sampled on a homogeneous time grid and MUST, except for the `glucose` column, not contain Nan values. In case of `scenario = 'multi-meal'` `data` (see \"Optional parameters\" section below) MUST also contain a column of strings `choLabel` that contains for each non-zero value of the `CHO` column, a character that specifies the type of CHO intake (`'B'` for breakfast, `'L'` for lunch, `'D'` for dinner, `'S'` for snack, `'H'` for hypotreatment);\n- `BW` is the patient body weight (kg);\n- `scenario`: a vector of characters that specifies whether the given scenario refers to a single-meal scenario or a multi-meal scenario. Can be `'single-meal'` or `'multi-meal'`;\n- `saveName` is a vector of characters used to label, thus identify, each output file and result of ReplayBG.\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 0.9907741514349298,
      "result": {
        "original_header": "ReplayBG",
        "type": "Text_excerpt",
        "value": "ReplayBG is a digital twin-based methodology to assess new strategies for type 1 diabetes management.\n \n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "supervised_classification"
    },
    {
      "confidence": 0.9857515943837499,
      "result": {
        "original_header": "Notes",
        "type": "Text_excerpt",
        "value": "- Only the 'single-meal' mode has been extensively validated and evaluated in the referred paper. The 'multi-meal' model is working correctly but it is currently under development. \n- The code is continuosly evolving and if you want to support its development please feel free to contact me at giacomo.cappon@unipd.it.\n \n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "supervised_classification"
    }
  ],
  "documentation": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/gcappon/replay-bg/tree/master/docs"
      },
      "technique": "file_exploration"
    }
  ],
  "download_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://github.com/gcappon/replay-bg/releases"
      },
      "technique": "GitHub_API"
    }
  ],
  "forks_count": [
    {
      "confidence": 1,
      "result": {
        "type": "Number",
        "value": 3
      },
      "technique": "GitHub_API"
    }
  ],
  "forks_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://api.github.com/repos/gcappon/replay-bg/forks"
      },
      "technique": "GitHub_API"
    }
  ],
  "full_name": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "gcappon/replay-bg"
      },
      "technique": "GitHub_API"
    }
  ],
  "full_title": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "ReplayBG"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "regular_expression"
    }
  ],
  "installation": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Installation",
        "parent_header": [
          "Getting started"
        ],
        "type": "Text_excerpt",
        "value": "Installation of ReplayBG can be easily performed by including the ReplayBG folder in the MATLAB\u00ae *PATH*. To do so: \n\n1. Download the latest ReplayBG release (e.g. `X.Y.Z`) from Github --> [here](https://github.com/gcappon/replay-bg/releases);\n\n2. Unzip the downloaded archive and move the `replay-bg-X.Y.Z` folder to the desired location, for example `~/MATLAB/`;\n3. Open MATLAB\u00ae;\n4. To use the ReplayBG functions in the current MATLAB\u00ae session (or within a specific script), add `replay-bg-X.Y.Z` source folder and subfolders to the current MATLAB\u00ae *PATH* by executing in the command window (or at the top of the script)\n```MATLAB\naddpath(genpath('~/MATLAB/replay-bg-X.Y.Z/src'))\n```\n5. Enjoy!\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    }
  ],
  "issue_tracker": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://api.github.com/repos/gcappon/replay-bg/issues"
      },
      "technique": "GitHub_API"
    }
  ],
  "keywords": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": ""
      },
      "technique": "GitHub_API"
    }
  ],
  "license": [
    {
      "confidence": 1,
      "result": {
        "name": "GNU General Public License v3.0",
        "spdx_id": "GPL-3.0",
        "type": "License",
        "url": "https://api.github.com/licenses/gpl-3.0",
        "value": "https://api.github.com/licenses/gpl-3.0"
      },
      "technique": "GitHub_API"
    }
  ],
  "logo": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://i.postimg.cc/gJn8Sy0X/replay-bg-logo.png"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "regular_expression"
    }
  ],
  "name": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "replay-bg"
      },
      "technique": "GitHub_API"
    }
  ],
  "owner": [
    {
      "confidence": 1,
      "result": {
        "type": "User",
        "value": "gcappon"
      },
      "technique": "GitHub_API"
    }
  ],
  "programming_languages": [
    {
      "confidence": 1,
      "result": {
        "name": "MATLAB",
        "size": 271782,
        "type": "Programming_language",
        "value": "MATLAB"
      },
      "technique": "GitHub_API"
    }
  ],
  "readme_url": [
    {
      "confidence": 1,
      "result": {
        "type": "Url",
        "value": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md"
      },
      "technique": "file_exploration"
    }
  ],
  "releases": [
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "gcappon",
          "type": "User"
        },
        "date_created": "2022-07-06T15:17:35Z",
        "date_published": "2022-07-06T15:19:14Z",
        "description": "ReplayBG can now work as a simulator leveraging identified model parameters to represent a virtual subject. \r\n\r\n### Added\r\n\r\n- Input source can now be specified by the user using the new optional `bolusSource` (default: `'data'`, can be `'data'` or `'dss'`), `basalSource` (default: `'data'`, can `'data'`, `'u2ss'`, or `'dss'`) and `choSource` (default: `'data'`, can be `'data'` or `'generated'`) input parameters of `replayBG` function.\r\n- User can now specify custom handlers for:\r\n  - a meal generation policy using the `mealGeneratorHandler` optional input parameter of `replayBG` (used if `choSource` is `'generated'`);\r\n  - a basal controller using the `basalHandler` optional input parameter of `replayBG` (used if `basalSource` is `'dss'`);\r\n  - a bolus calculator using the `bolusCalculatorHandler` optional input parameter of `replayBG` (used if `bolusSource` is `'dss'`).\r\n- A new optional input parameter `GT` of `replayBG` that specify the target glucose level in mg/dl used by the integrated dss (default: 120);\r\n- A default `mealGeneratorHandler`, `defaultMealGeneratorHandler`;\r\n- A default `basalHandler`, `defaultBasalHandler`;\r\n- A default `bolusCalculatorHandler`, `standardBolusCalculatorHandler`.\r\n\r\n### Changed\r\n\r\n- `scenario` input variable of `replayBG` is now required;\r\n- Default value of `CR` is now 10 g/U;\r\n- Default value of `CF` is now 40 mg/dl/U.\r\n\r\n### Fixed\r\n\r\n- `plotReplayBGResults`: see issue #17.\r\n",
        "html_url": "https://github.com/gcappon/replay-bg/releases/tag/v2.1.0",
        "name": "v2.1.0",
        "release_id": 71384007,
        "tag": "v2.1.0",
        "tarball_url": "https://api.github.com/repos/gcappon/replay-bg/tarball/v2.1.0",
        "type": "Release",
        "url": "https://api.github.com/repos/gcappon/replay-bg/releases/71384007",
        "value": "https://api.github.com/repos/gcappon/replay-bg/releases/71384007",
        "zipball_url": "https://api.github.com/repos/gcappon/replay-bg/zipball/v2.1.0"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "gcappon",
          "type": "User"
        },
        "date_created": "2022-06-15T10:36:48Z",
        "date_published": "2022-06-15T10:38:35Z",
        "html_url": "https://github.com/gcappon/replay-bg/releases/tag/v2.0.0",
        "name": "v2.0.0",
        "release_id": 69506634,
        "tag": "v2.0.0",
        "tarball_url": "https://api.github.com/repos/gcappon/replay-bg/tarball/v2.0.0",
        "type": "Release",
        "url": "https://api.github.com/repos/gcappon/replay-bg/releases/69506634",
        "value": "https://api.github.com/repos/gcappon/replay-bg/releases/69506634",
        "zipball_url": "https://api.github.com/repos/gcappon/replay-bg/zipball/v2.0.0"
      },
      "technique": "GitHub_API"
    },
    {
      "confidence": 1,
      "result": {
        "author": {
          "name": "gcappon",
          "type": "User"
        },
        "date_created": "2020-10-08T15:32:30Z",
        "date_published": "2020-10-08T15:34:39Z",
        "description": "First working version of ReplayBG.",
        "html_url": "https://github.com/gcappon/replay-bg/releases/tag/v1.0.0",
        "name": "v1.0.0",
        "release_id": 32329059,
        "tag": "v1.0.0",
        "tarball_url": "https://api.github.com/repos/gcappon/replay-bg/tarball/v1.0.0",
        "type": "Release",
        "url": "https://api.github.com/repos/gcappon/replay-bg/releases/32329059",
        "value": "https://api.github.com/repos/gcappon/replay-bg/releases/32329059",
        "zipball_url": "https://api.github.com/repos/gcappon/replay-bg/zipball/v1.0.0"
      },
      "technique": "GitHub_API"
    }
  ],
  "somef_missing_categories": [
    "acknowledgement",
    "run",
    "download",
    "requirements",
    "contact",
    "contributors",
    "faq",
    "support",
    "identifier",
    "has_build_file",
    "executable_example"
  ],
  "somef_provenance": {
    "date": "2024-10-04 00:50:51",
    "somef_schema_version": "1.0.0",
    "somef_version": "0.9.5"
  },
  "stargazers_count": [
    {
      "confidence": 1,
      "result": {
        "type": "Number",
        "value": 12
      },
      "technique": "GitHub_API"
    }
  ],
  "type": [
    {
      "confidence": 1,
      "result": {
        "type": "String",
        "value": "static-website"
      },
      "technique": "software_type_heuristics"
    }
  ],
  "usage": [
    {
      "confidence": 1,
      "result": {
        "original_header": "Step 1: Identification of ReplayBG model",
        "parent_header": [
          "Getting started"
        ],
        "type": "Text_excerpt",
        "value": "The first step consists of fitting the ReplayBG model agaist data to capture the underlying physiological dynamics and estimate its parameter distributions via Markov Chain Monte Carlo (MCMC). This is possible by providing to the tool a portion of data recorded from people with type 1 diabetes consisting of glucose recordings, carbohydrate intakes, and bolus + basal insulin infusions. \n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Optional parameters",
        "parent_header": [
          "Getting started",
          "Step 2: Use of ReplayBG for simulation"
        ],
        "type": "Text_excerpt",
        "value": "ReplayBG accepts optional parameters that can be used to fit user's preferences. These include: \n\n- `glucoseModel`: (optional, default: `'IG'`) a vector of characters that specifies the glucose model to use. Can be `'IG'` or `'BG'`;\n- `cgmModel`: (optional, default: `'IG'`) a vector of characters that specifies the glucose model to use as cgm measurement. Can be `'CGM'`, `'IG'` or `'BG'`;\n- `pathology`: (optional, default: `'t1d'`) a vector of characters that specifies the patient pathology. Can be `'t1d'`, `'t2d'`, `'pbh'`, `'healthy'`. Note that `'t2d'`, `'pbh'`, and `'healthy'` functionalities will be matter of future work and do not work at the moment;\n- `scenario`: (optional, default: `'single-meal'`) a vector of characters that specifies whether the given scenario refers to a single-meal scenario or a multi-meal scenario. Can be `'single-meal'` or `'multi-meal'`;\n- `sampleTime`: (optional, default: `5` (min)) an integer that specifies the `data` sample time;\n- `seed`: (optional, default: `randi([1 1048576])`) an integer that specifies the random seed. For reproducibility;\n- `maxETAPerMCMCRun`: (optional, default: `inf`) a number that specifies the maximum time in hours allowed for each MCMC run; \n- `maxMCMCIterations`: (optional, default: `inf`) an integer that specifies the maximum number of iterations for each MCMC run; \n- `maxMCMCRuns`: (optional, default: `inf`) an integer that specifies the maximum number of MCMC runs; \n- `maxMCMCRunsWithMaxETA`: (optional, default: `inf`) an integer that specifies the maximum number of MCMC runs having maximum ETA; \n- `adaptiveSCMH`: (optional, default: `1`) a numerical flag that specifies whether to make the Single Components Metropolis Hastings algorithm adaptive or non-adaptive. Can be `0` or `1`.\n- `MCMCTheta0Policy`: (optional, default: `'mean'`) a vector of characters defining the policy used by the MCMC procedure to set the initial MCMC chain values. Can be `'mean'` or `'last'` or `'initial'`. Using `'mean'`, the mean value of the MCMC chain obtained from the last MCMC run will be set as initial MCMC chain value to be used in the next MCMC run. Using `'last'`, the last value of the MCMC chain obtained from the last MCMC run will be set as initial MCMC chain value to be used in the next MCMC run. Using `'initial'`, the same initial value will be used for every run of MCMC;\n- `bayesianEstimator`: (optional, default: `'mean'`) a vector of characters defining which Bayesian estimator to use to obtain a point estimate of model parameters. Can be `'mean'` or `'map'`. Using `'mean'` the posterior mean estimater will be used. Using `'map'`, the marginalized maximum-a-posteriori estimator will be used. Note that this point estimate is not used during step 2 (it is just an output of the identification procedure);\n- `preFilterData`: (optional, default: `0`) a numerical flag that specifies whether to filter the glucose data before performing the model identification or not. Can be `0` or `1`. This might help the identification procedure. Filtering is performed using a non-causal fourth-order Butterworth filter having `0.1*sampleTime` cut-off frequency;\n- `saveChains`: (optional, default: `1`) a numerical flag that specifies whether to save the resulting mcmc chains in dedicated files (one for each MCMC run) for future analysis or not. Can be `0` or `1`;\n- `saveSuffix`: (optional, default: `''`) a vector of char to be attached as suffix to the resulting output files' name;\n- `plotMode`: (optional, default: `1`) a numerical flag that specifies whether to show the plot of the results or not. Can be `0` or `1`;\n- `enableLog`: (optional, default: `1`) a numerical flag that specifies whether to log the output of ReplayBG not. Can be `0` or `1`;\n- `verbose`: (optional, default: `1`) a numerical flag that specifies the verbosity of ReplayBG. Can be `0` or `1`.\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Suggested settings for step 1",
        "parent_header": [
          "Getting started",
          "Step 1: Identification of ReplayBG model"
        ],
        "type": "Text_excerpt",
        "value": "Potentially, given the computational cost and the function of the parameter identification machinery (MCMC), this step can take forever. \n\nThese are some suggested usage of ReaplyBG depending on your needs.\n\nPlease remember that the rationale is to identify a dataset \"once and for all\" (that is the heavy part of ReplayBG) and then play with the simulations (see \"Step 2: Use of ReplayBG for simulation\"). \n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Use case 1: single-meal scenario",
        "parent_header": [
          "Getting started",
          "Step 1: Identification of ReplayBG model",
          "Suggested settings for step 1"
        ],
        "type": "Text_excerpt",
        "value": "```MATLAB\nreplayBG( ...\n  'identification', data, BW, 'single-meal', saveName, ...\n  'maxETAPerMCMCRun', 6, ...\n  'maxMCMCRuns', 4, ...\n  'plotMode',1, ...\n  'verbose',1, ...\n  'seed', 1, ...\n);\n```\n\nThis will ensure a maximum running time of 24 hours (i.e., 4 x 6 hours). Consider increasing `maxETAPerMCMCRun` if warnings on MCMC convergence are raised by ReplayBG.\nIf you prefer to run ReplayBG \"silently\" or in a server infrastructure, set `plotMode` and `verbose` to `0`. \n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Use case 2: multi-meal scenario",
        "parent_header": [
          "Getting started",
          "Step 1: Identification of ReplayBG model",
          "Suggested settings for step 1"
        ],
        "type": "Text_excerpt",
        "value": "```MATLAB\nreplayBG( ...\n  'identification', data, BW, 'multi-meal', saveName, ...\n  'maxETAPerMCMCRun', 12, ...\n  'maxMCMCRuns', 4, ...\n  'plotMode',1, ...\n  'verbose',1, ...\n  'seed', 1, ...\n);\n```\n\nThis will ensure a maximum running time of 48 hours (i.e., 4 x 12 hours). Consider increasing `maxETAPerMCMCRun` if warnings on MCMC convergence are raised by ReplayBG.\nIf you prefer to run ReplayBG \"silently\" or in a server infrastructure, set `plotMode` and `verbose` to `0`. \n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Use case 3: Playing around with ReplayBG",
        "parent_header": [
          "Getting started",
          "Step 1: Identification of ReplayBG model",
          "Suggested settings for step 1"
        ],
        "type": "Text_excerpt",
        "value": "```MATLAB\nreplayBG( ...\n  'identification', data, BW, scenario, saveName, ...\n  'maxETAPerMCMCRun', 5/60, ...\n  'maxMCMCRuns', 2, ...\n  'plotMode',1, ...\n  'verbose',1, ...\n  'seed', 1, ...\n);\n```\n\nThis will ensure a maximum running time of 10 minutes (i.e., 2 x 5 minutes). \nThis is useful to have a grasp of ReplayBG functioning. Since 5 minutes MCMC runs can lead to very short MCMC chains, it can happen (almost for sure) that some warnings will be raised by ReplayBG alerting that the MCMC did not converge.\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Step 2: Use of ReplayBG for simulation",
        "parent_header": [
          "Getting started"
        ],
        "type": "Text_excerpt",
        "value": "The second step of ReplayBG consists of using the model parameters identified during step 1 and run simulations on the same time window but with different, altered model inputs (meal and insulin) to predict \"what would have happened\", in terms of glycemic time course, if such inputs would have been used instead of the orginal recorded ones. This basically allows to test the potential impact on glycemia of new insulin/carbohydrate algorithms for the management of type 1 diabetes. \n\n### The basics\n\nAs in step 1, ReplayBG has different level of flexibility and can perform step 2 differently according to the user preferences. The easiest way to do this is calling the `replayBG` function as: \n\n```MATLAB\nreplayBG('replay', data, BW, scenario, saveName);\n```\nwhere:\n\n- `'replay'` specifies that the tool will be used to simulate the scenario specified by the given `data`;\n- `data` is a timetable which contains the data to be used by the tool. MUST contain a column `glucose` that contains the glucose measurements (in mg/dl), a column `basal` that contains the basal insulin data (in U/min), a column `bolus` that contains the bolus insulin data (in U/min), a column `CHO` that contains the CHO intake data (in g/min). `data` MUST be sampled on a homogeneous time grid and MUST, except for the `glucose` column, not contain Nan values. In case of `scenario = 'multi-meal'` `data` (see \"Optional parameters\" section below) MUST also contain a column of strings `choLabel` that contains for each non-zero value of the `CHO` column, a character that specifies the type of CHO intake (`'B'` for breakfast, `'L'` for lunch, `'D'` for dinner, `'S'` for snack, `'H'` for hypotreatment);\n- `BW` is the patient body weight (kg);\n- `scenario`: a vector of characters that specifies whether the given scenario refers to a single-meal scenario or a multi-meal scenario. Can be `'single-meal'` or `'multi-meal'`;\n- `saveName` is a vector of characters used to label, thus identify, each output file and result of ReplayBG. **To use specific model parameters identified in step 1, you MUST be the same corresponding `saveName` used during step 1.**\n\n### Optional parameters\n\nReplayBG accepts optional parameters that can be used to fit user's preferences. These include: \n\n- `glucoseModel`: (optional, default: `'IG'`) a vector of characters that specifies the glucose model to use. Can be `'IG'` or `'BG'`;\n- `cgmModel`: (optional, default: `'IG'`) a vector of characters that specifies the glucose model to use as cgm measurement. Can be `'CGM'`, `'IG'` or `'BG'`;\n- `pathology`: (optional, default: `'t1d'`) a vector of characters that specifies the patient pathology. Can be `'t1d'`, `'t2d'`, `'pbh'`, `'healthy'`. Note that `'t2d'`, `'pbh'`, and `'healthy'` functionalities will be matter of future work and do not work at the moment;\n- `sampleTime`: (optional, default: `5` (min)) an integer that specifies the `data` sample time;\n- `bolusSource`: (optional, default: `'data'`) a vector of character defining whether to use, during replay, the insulin bolus data contained in the `data` timetable (if `data`), or the boluses generated by the bolus calculator implemented via the provided `bolusCalculatorHandler` function. Can be `'data'` or `'dss'`. It cannot be set if `modality` is `'identification'`;\n- `basalSource`: (optional, default: `'data'`) a vector of character defining whether to use, during replay, the insulin basal data contained in the `data` timetable (if `data`), or the basal generated by the controller implemented via the provided `basalControllerHandler` function (if `dss`), or fixed to the average basal rate used during identification (if `'u2ss'`). Can be `'data'`, `'u2ss'`, or `'dss'`. It cannot be set if `modality` is `'identification'`;\n- `choSource`: (optional, default: `'data'`) a vector of character defining whether to use, during replay, the CHO data contained in the `data` timetable (if `data`), or the CHO generated by the meal generator implemented via the provided `mealGeneratorHandler` function. Can be `'data'` or `'generated'`. It cannot be set if `modality` is `'identification'`;\n- `CR`: (optional, default: 10) the carbohydrate-to-insulin ratio of the patient in g/U to be used by the integrated decision support system;\n- `CF`: (optional, default: 40) the correction factor of the patient in mg/dl/U to be used by the integrated decision support system;\n- `GT`: (optional, default: 120) the target glucose value in mg/dl to be used by the decsion support system modules;\n- `bolusCalculatorHandler`: (optional, default: `'standardBolusCalculatorHandler'`) a vector of characters that specifies the name of the function handler that implements a bolus calculator to be used during the replay of a given scenario when `bolusSource` is `'dss'`. The function must have 2 output, i.e., the computed insulin bolus (U/min) and a structure containing the dss hyperparameter. The function must have 7 inputs, i.e., `G` (mg/dl) a vector as long the  simulation length containing all the simulated glucose concentrations up to `timeIndex` (the other values are nan), `mealAnnouncements` (g/min) a vector that contains the announced meal CHO intakes inputs for the whole replay simulation, `bolus` (U/min) a vector that contains the bolus insulin input for the whole replay simulation, `basal` (U/min) a vector that contains the basal insulin input for the whole replay simulation, `time` (datetime) a vector that contains the time istants of current replay simulation, `timeIndex` is a number that defines the current time istant in the replay simulation, `dss` a structure containing the dss hyperparameters and the optionally provided `bolusCalculatorHandlerParams` (`dss` is also echoed in the output to enable memory-like features). Vectors contain one value for each integration step. The default bolus calculator implemented by `standardBolusCalculatorHandler` is the standard formula: B = CHO/CR + (GC-GT)/CF - IOB;\n- `bolusCalculatorHandlerParams`: (optional, default: `[]`) a structure that contains the parameters to pass to the bolusCalculatorHandler function. It also serves as memory area for the `bolusCalculatorHandler` function;\n- `basalHandler`: (optional, default: `'defaultBasalHandler'`) a vector of characters that specifies the name of the function handler that implements a basal controller to be used during the replay of a given scenario when `basalSource` is `'dss'`. The function must have 2 output, i.e., the computed basal rate (U/min) and a structure containing the dss hyperparameter. The function must have 7 inputs, i.e., `G` (mg/dl) a vector as long the simulation length containing all the simulated glucose concentrations up to `timeIndex` (the other values are nan), `mealAnnouncements` (g/min) a vector that contains the announced meal CHO intakes inputs for the whole replay simulation, `bolus` (U/min) a vector that contains the bolus insulin input for the whole replay simulation, `basal` (U/min) a vector that contains the basal insulin input for the whole replay simulation, `time` (datetime) a vector that contains the time istants of current replay simulation, `timeIndex` is a number that defines the current time istant in the replay simulation, `dss` a structure containing the dss hyperparameters and the optionally provided `basalHandlerParams` (`dss` is also echoed in the output to enable memory-like features). Vectors contain one value for each integration step. The default basal controller implemented by `'defaultBasalHandler'` is: if G < 70, basal = 0, otherwise basal = basal(1). \n- `basalHandlerParams`: (optional, default: `[]`) a structure that contains the parameters to pass to the basalHandler function. It also serves as memory area for the `basalHandler` function;\n- `mealGeneratorHandler`: (optional, default: `'defaultMealGeneratorHandler'`) a vector of characters that specifies the name of the function handler that implements a meal generator to be used during the replay of a given scenario when `choSource` is `'generated'`. The function must have 4 outputs, i.e., the generated meal (g/min) actually consumed by the virtual subject, the generated meal announcement (g/min) that is usually used to compute the corresponding insulin bolus, the type of the meal (must be `'B'`,`'L'`,`'D'`, or `'S'`), and a structure containing the dss hyperparameter. The function must have 8 inputs, i.e., `G` (mg/dl) a vector as long the simulation length containing all the simulated glucose concentrations up to `timeIndex` (the other values are nan), `meal` (g/min) a vector that contains the meal CHO intakes inputs for the whole replay simulation, `mealAnnouncements` (g/min) a vector that contains the announced meal CHO intakes inputs for the whole replay simulation, `bolus` (U/min) a vector that contains the bolus insulin input for the whole replay simulation, `basal` (U/min) a vector that contains the basal insulin input for the whole replay simulation, `time` (datetime) a vector that contains the time istants of current replay simulation, `timeIndex` is a number that defines the current time istant in the replay simulation, `dss` a structure containing the dss hyperparameters and the optionally provided `mealGeneratorHandlerParams` (`dss` is also echoed in the output to enable memory-like features). Vectors contain one value for each integration step. The default meal generator implemented by `defaultMealGeneratorHandler` is: put a snack meal of 50g of CHO in the first instant and announce only 40g.\n- `mealGeneratorHandlerParams`: (optional, default: `[]`) a structure that contains the parameters to pass to the `mealGeneratorHandler` function. It also serves as memory area for the `mealGeneratorHandler` function;\n- `enableHypoTreatments`: (optional, default: `0`) a numerical flag that specifies whether to enable hypotreatments during the replay of a given scenario. Can be `0` or `1`. Can be set only when ReplayBG is used in `'replay'` mode;\n- `hypoTreatmentsHandler`: (optional, default: `'adaHypoTreatmentsHandler'`) a vector of characters that specifies the name of the function handler that implements an hypotreatment strategy during the replay of a given scenario. The function must have 2 outputs, i.e., the hypotreatments carbohydrates intake (g/min) and the `dss` structure (see section \"Use case 2: Test an hypotreatment strategy with ReplayBG\" below). The function must have 8 inputs, i.e., `G` (mg/dl) a glucose vector as long the simulation length containing all the simulated glucose concentrations up to timeIndex (the other values are nan), `CHO` (g/min) a vector that contains the CHO intakes input for the whole replay simulation, `hypotreatments` (g/min) a vector that contains the hypotreatments intakes input for the whole replay simulation (will be also populated by ReplayBG during the simulation if one or more hypotreatment is given by the function itself), `bolus` (U/min) a vector that contains the bolus insulin input for the whole replay simulation, `basal` (U/min) a vector that contains the basal insulin input for the whole replay simulation, `time` (datetime) a vector that contains the time instants of current replay simulation, `timeIndex` is a number that defines the current time instant in the replay simulation and the `dss` structure. Vectors contain one value for each integration step. The default policy implemented by the `adaHypoTreatmentsHandler` function is \"take an hypotreatment of 10 g every 15 minutes while in hypoglycemia\";\n- `enableCorrectionBoluses`: (optional, default: `0`) a numerical flag that specifies whether to enable correction boluses during the replay of a  given scenario. Can be `0` or `1`. Can be set only when ReplayBG is used in `'replay'` mode;\n- `correctionBolusesHandler`: (optional, default: `'correctsAbove250Handler'`) a vector of characters that specifies the name of the function handler that implements a corrective bolusing strategy during the replay of a given scenario. The function must have 2 output, i.e., the correction insulin bolus (U/min) and the `dss` structure (see section \"Use case 3: Test a corrective bolusing strategy with ReplayBG\" below). The function must have 7 inputs, i.e., `G` (mg/dl) a glucose vector as long the simulation length containing all the simulated glucose concentrations up to timeIndex (the other values are nan), `CHO` (g/min) a vector that contains the CHO intakes input for the whole replay simulation, `bolus` (U/min) a vector that contains the bolus insulin input for the whole replay simulation, `basal` (U/min) a vector that contains the basal insulin input for the whole replay simulation, `time` (datetime) a vector that contains the time instants of current replay simulation, `timeIndex` is a number that defines the current time instant in the replay simulation and the `dss` structure. Vectors contain one value for each integration step. The default policy implemented by the `correctsAbove250Handler` function is \"take a corrective bolus of 1 U every 1 hour while above 250 mg/dl\";\n- `hypoTreatmentsHandlerParams`: (optional, default: `[]`) a structure that contains the parameters to pass to the `hypoTreatmentsHandler` function (see section \"Use case 2: Test an hypotreatment strategy with ReplayBG\" below). It also serves as memory area for the `hypoTreatmentsHandler` function;\n- `correctionBolusesHandlerParams`: (optional, default: `[]`) a structure that contains the parameters to pass to the `correctionBolusesHandler` function (see section \"Use case 3: Test a corrective bolusing strategy with ReplayBG\" below). It also serves as memory area for the `correctionBolusesHandler` function;\n- `seed`: (optional, default: `randi([1 1048576])`) an integer that specifies the random seed. For reproducibility;\n- `saveSuffix`: (optional, default: `''`) a vector of char to be attached as suffix to the resulting output files' name;\n- `plotMode`: (optional, default: `1`) a numerical flag that specifies whether to show the plot of the results or not. Can be `0` or `1`;\n- `enableLog`: (optional, default: `1`) a numerical flag that specifies whether to log the output of ReplayBG not. Can be `0` or `1`;\n- `verbose`: (optional, default: `1`) a numerical flag that specifies the verbosity of ReplayBG. Can be `0` or `1`.\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Example of ReplayBG use for assessing your algorithm",
        "parent_header": [
          "Getting started",
          "Step 2: Use of ReplayBG for simulation"
        ],
        "type": "Text_excerpt",
        "value": "Potentially, given the computational cost and the function of the parameter identification machinery (MCMC), this step can take forever. \n\nThese are some suggested usage of ReaplyBG depending on your needs.\n\nPlease remember that the rationale is to identify a dataset \"once and for all\" (that is the heavy part of ReplayBG) and then play with the simulations (see \"Step 2: Use of ReplayBG for simulation\"). \n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Use case 1: Test different inputs by simply modifying `data`",
        "parent_header": [
          "Getting started",
          "Step 2: Use of ReplayBG for simulation",
          "Example of ReplayBG use for assessing your algorithm"
        ],
        "type": "Text_excerpt",
        "value": "The most simple use case of ReaplyBG consists of modifying the `data` timetable used during step 1 setting new insulin/meal inputs and replaying the scenario. For example if you want to simulate \"what would have happened if I had doubled the CHO intake?\":\n\n```MATLAB\n%Here, I suppose that data is the timetable used during identification\ndata.CHO = data.CHO*2;\nreplayBG( ...\n  'replay', data, BW, scenario, saveName, ...\n  'plotMode',1, ...\n  'verbose',1, ...\n  'seed', 1, ...\n);\n```\n\nThe same rationale can be applied to the insulin bolus/basal input. \n\nNote that if you want to add a meal and `scenario` is `multi-meal` you also have to set the corresponding `choLabel`, e.g.:\n```MATLAB\n%Here, I suppose that data is the timetable used during identification\ndata.CHO(12) = 5; %Here I am adding a snack of 5 g/min at 12*`sampleTime` minutes after the starting of the simulation.\ndata.choLabel(12) = 'S';\nreplayBG( ...\n  'replay', data, BW, scenario, saveName, ...\n  'plotMode',1, ...\n  'verbose',1, ...\n  'seed', 1, ...\n);\n```\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Use case 2: Test an hypotreatment strategy with ReplayBG",
        "parent_header": [
          "Getting started",
          "Step 2: Use of ReplayBG for simulation",
          "Example of ReplayBG use for assessing your algorithm"
        ],
        "type": "Text_excerpt",
        "value": "Let's say that you want to test an algorithm that advice to take an hypotreatment according to some strategy to avoid hypoglycemia. \n\nYou have to follow two steps: \n1. First define a function that implements your strategy, namely the \"handler\". This function, as stated above, must have 2 outputs, i.e., the hypotreatments carbohydrates intake (g/min) and the `dss` structure. The function must have 8 inputs, i.e., `G` (mg/dl) a glucose vector as long the simulation length containing all the simulated glucose concentrations up to timeIndex (the other values are nan), `CHO` (g/min) a vector that contains the CHO intakes input for the whole replay simulation, `hypotreatments` (g/min) a vector that contains the hypotreatments intakes input for the whole replay simulation (will be also populated by ReplayBG during the simulation if one or more hypotreatment is given by the function itself), `bolus` (U/min) a vector that contains the bolus insulin input for the whole replay simulation, `basal` (U/min) a vector that contains the basal insulin input for the whole replay simulation, `time` (datetime) a vector that contains the time instants of current replay simulation, `timeIndex` is a number that defines the current time instant in the replay simulation and the `dss` structure. For example, here's the default handler implemented in ReplayBG that provides the user with an example to start playing with:\n\n```MATLAB\nfunction [HT, dss] = adaHypoTreatmentsHandler(G,CHO,hypotreatments,bolus,basal,time,timeIndex,dss)\n% function  adaHypoTreatmentsHandler(G,CHO,hypotreatments,bolus,basal,time,timeIndex,dss)\n% Implements the default hypotreatment strategy: \"take an hypotreatment of \n% 10 g every 15 minutes while in hypoglycemia\".\n%\n% ---------------------------------------------------------------------\n%\n% Copyright (C) 2020 Giacomo Cappon\n%\n% This file is part of ReplayBG.\n%\n% ---------------------------------------------------------------------\n\n    HT = 0;\n    \n    %If glucose is lower than 70...\n    if(G(timeIndex) < 70)\n        \n        %...and if there are no CHO intakes in the last 15 minutes, then take an HT\n        if(timeIndex > 15 && ~any(hypotreatments((timeIndex - 15):timeIndex)))\n            HT = 15; % g/min\n        end\n        \n    end\n        \nend\n```\n\n2. Call ReplayBG by enabling the hypotreatments \"module\" and by providing the name of the handler just created: \n\n```MATLAB\n%Here, I suppose that data is the timetable used during identification\nreplayBG( ...\n  'replay', data, BW, scenario, saveName, ...\n  'enableHypoTreatments', 1, ...\n  'hypoTreatmentsHandler', 'adaHypoTreatmentsHandler', ...\n  'plotMode',1, ...\n  'verbose',1, ...\n  'seed', 1, ...\n);\n```\n\nThree notes: \n\n- The handler function will be called for each integration time step (each \"simulated\" minute). This will slow down ReplayBG.\n- If `scenario` is `'single meal'`, the `hypotreatments` input will contain only the hypotreatments generated by this function during the simulation. If `scenario` is `'multi-meal'`, the `hypotreatments` input will ALSO contain the hypotreatments already present in the given data that labeled as such.\n- `CHO` does not contain hypotreatments.\n- `dss` is a structure that serves as memory area and contains decsion support related parameter passed to ReplayBG when you call the `replayBG` function (i.e., the parameters `BW, `GT`, `CR`, `CF`, `bolusCalculatorHandlerParams`, `basalHandlerParams`, `mealGeneratorHandlerParams`, `hypoTreatmentsHandlerParams`, and `correctionBolusesHandlerParams`). As such you can use it to provide to your handler the parameter you need. Also, keep in mind that, serving as a memory area, it is possible to store values inside `dss` and `hypoTreatmentsHandlerParams` and they will be available in the next call of the function (this is useful if you need to compute things like the insulin-on-board, or \"when is the last time I gave an hypotreatment?\").\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Use case 3: Test a corrective bolusing strategy with ReplayBG",
        "parent_header": [
          "Getting started",
          "Step 2: Use of ReplayBG for simulation",
          "Example of ReplayBG use for assessing your algorithm"
        ],
        "type": "Text_excerpt",
        "value": "Let's say that you want to test an algorithm that advice to take a corrective insulin bolus according to some strategy to avoid hyperglycemia. \n\nYou have to follow two steps: \n1. First define a function that implements your strategy, namely the \"handler\". This function, as stated above, must have 2 outputs, i.e., the hypotreatments carbohydrates intake (g/min) and the `dss` structure. The function must have 7 inputs, i.e., `G` (mg/dl) a glucose vector as long the simulation length containing all the simulated glucose concentrations up to timeIndex (the other values are nan), `CHO` (g/min) a vector that contains the CHO intakes input for the whole replay simulation, `bolus` (U/min) a vector that contains the bolus insulin input for the whole replay simulation, `basal` (U/min) a vector that contains the basal insulin input for the whole replay simulation, `time` (datetime) a vector that contains the time instants of current replay simulation, `timeIndex` is a number that defines the current time instant in the replay simulation and the `dss` structure. For example, here's the default handler implemented in ReplayBG that provides the user with an example to start playing with:\n\n```MATLAB\nfunction [CB, dss] = correctsAbove250Handler(G,CHO,bolus,basal,time,timeIndex,dss)\n% function  correctsAbove250Handler(G,CHO,bolus,basal,time,timeIndex,dss)\n% Implements the default correction bolus strategy: \"take a correction\n% bolus of 1 U every 1 hour while above 250 mg/dl\".\n%\n% ---------------------------------------------------------------------\n%\n% Copyright (C) 2020 Giacomo Cappon\n%\n% This file is part of ReplayBG.\n%\n% ---------------------------------------------------------------------\n\n    CB = 0;\n    \n    %If glucose is greater than 250...\n    if(G(timeIndex) > 250)\n        \n        %...and if there are no boluses in the last 1 hour, then take a CB\n        if(timeIndex > 60 && ~any(bolus((timeIndex - 60):timeIndex)))\n            CB = 1; % U/min\n        end\n        \n    end\n    \nend\n```\n\n2. Call ReplayBG by enabling the correction insulin \"module\" and by providing the name of the handler just created: \n\n```MATLAB\n%Here, I suppose that data is the timetable used during identification\nreplayBG( ...\n  'replay', data, BW, scenario, saveName, ...\n  'enableCorrectionBoluses', 1, ...\n  'correctionBolusesHandler', 'correctsAbove250Handler', ...\n  'plotMode',1, ...\n  'verbose',1, ...\n  'seed', 1, ...\n);\n```\n\nThree notes: \n\n- The handler function will be called for each integration time step (each \"simulated\" minute). This will slow down ReplayBG.\n- `dss` is a structure that serves as memory area and contains decsion support related parameter passed to ReplayBG when you call the `replayBG` function (i.e., the parameters `BW, `GT`, `CR`, `CF`, `bolusCalculatorHandlerParams`, `basalHandlerParams`, `mealGeneratorHandlerParams`, `hypoTreatmentsHandlerParams`, and `correctionBolusesHandlerParams`). As such you can use it to provide to your handler the parameter you need. Also, keep in mind that, serving as a memory area, it is possible to store values inside `dss` and `correctionBolusesHandlerParams` and they will be available in the next call of the function (this is useful if you need to compute things like the insulin-on-board, or \"when is the last time I gave a correction bolus?\").\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Use case 4: Test a bolus calculator with ReplayBG",
        "parent_header": [
          "Getting started",
          "Step 2: Use of ReplayBG for simulation",
          "Example of ReplayBG use for assessing your algorithm"
        ],
        "type": "Text_excerpt",
        "value": "Let's say that you want to test an algorithm that computes the meal insulin bolus according to some strategy. \n\nYou have to follow two steps: \n1. First define a function that implements your strategy, namely the \"handler\". This function, as stated above, the function must have 2 output, i.e., the computed insulin bolus (U/min) and a structure containing the dss hyperparameter. The function must have 7 inputs, i.e., `G` (mg/dl) a vector as long the  simulation length containing all the simulated glucose concentrations up to `timeIndex` (the other values are nan), `mealAnnouncements` (g/min) a vector that contains the announced meal CHO intakes inputs for the whole replay simulation, `bolus` (U/min) a vector that contains the bolus insulin input for the whole replay simulation, `basal` (U/min) a vector that contains the basal insulin input for the whole replay simulation, `time` (datetime) a vector that contains the time istants of current replay simulation, `timeIndex` is a number that defines the current time istant in the replay simulation, `dss` a structure containing the dss hyperparameters. For example, here's the default handler implemented in ReplayBG that provides the user with an example to start playing with:\n\n```MATLAB\nfunction [B, dss] = standardBolusCalculatorHandler(G, mealAnnouncements,bolus,basal,time,timeIndex,dss)\n% function  standardBolusCalculatorHandler(G,mealAnnouncements,bolus,basal,time,timeIndex,dss)\n% Implements the default insulin bolus calculator formula: B = CHO/CR + (GC -GT)/CF - IOB.\n%\n% ---------------------------------------------------------------------\n%\n% Copyright (C) 2022 Giacomo Cappon\n%\n% This file is part of ReplayBG.\n%\n% ---------------------------------------------------------------------\n\n    B = 0;\n    \n    %If a meal is announced...\n    if(mealAnnouncements(timeIndex) > 0)\n        \n        %...give a bolus\n        B = mealAnnouncements(timeIndex)/dss.CR + (G(timeIndex) - dss.GT) / dss.CF - iobCalculation(bolus(1:timeIndex),5);\n        \n    end\n    \nend\n\nfunction [IOB] = iobCalculation(insulin,Ts)\n\n    % define 6 hour curve\n    k1 = 0.0173;\n    k2 = 0.0116;\n    k3 = 6.75;\n    IOB_6h_curve = zeros(360,1);\n    for t = 1:360\n        IOB_6h_curve(t)= 1 - ...\n            0.75*((-k3/(k2*(k1-k2))*(exp(-k2*(t)/0.75)-1) + ...\n            k3/(k1*(k1-k2))*(exp(-k1*(t)/0.75)-1))/(2.4947e4));\n    end\n    IOB_6h_curve = IOB_6h_curve(Ts:Ts:end);\n\n    % IOB is the convolution of insulin data with IOB curve\n    IOB = conv(insulin, IOB_6h_curve);\n    IOB = IOB(length(insulin));\n\nend\n```\n\n2. Call ReplayBG by changing the `bolusSource` from `'data'` to `'dss'` and by providing the name of the handler just created: \n\n```MATLAB\n%Here, I suppose that data is the timetable used during identification\nreplayBG( ...\n  'replay', data, BW, scenario, saveName, ...\n  'bolusSource','dss', ...\n  'bolusCalculatorHandler', 'standardBolusCalculator', ...\n  'plotMode',1, ...\n  'verbose',1, ...\n  'seed', 1, ...\n);\n```\n\nThree notes: \n\n- The handler function will be called for each integration time step (each \"simulated\" minute). This will slow down ReplayBG.\n- `dss` is a structure that serves as memory area and contains decision support related parameter passed to ReplayBG when you call the `replayBG` function (i.e., the parameters `BW, `GT`, `CR`, `CF`, `bolusCalculatorHandlerParams`, `basalHandlerParams`, `mealGeneratorHandlerParams`, `hypoTreatmentsHandlerParams`, and `correctionBolusesHandlerParams`). As such you can use it to provide to your handler the parameter you need. Also, keep in mind that, serving as a memory area, it is possible to store values inside `dss` and `bolusCalculatorHandlerParams` and they will be available in the next call of the function (this is useful if you need to compute things like the insulin-on-board, or \"when is the last time I gave an insulin bolus?\").\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Use case 5: Test a basal controller with ReplayBG",
        "parent_header": [
          "Getting started",
          "Step 2: Use of ReplayBG for simulation",
          "Example of ReplayBG use for assessing your algorithm"
        ],
        "type": "Text_excerpt",
        "value": "Let's say that you want to test an algorithm that basal rate infusion according to some strategy. \n\nYou have to follow two steps: \n1. First define a function that implements your strategy, namely the \"handler\". This function, as stated above, the function must have 2 output, i.e., the computed basal rate (U/min) and a structure containing the dss hyperparameter. The function must have 7 inputs, i.e., `G` (mg/dl) a vector as long the simulation length containing all the simulated glucose concentrations up to `timeIndex` (the other values are nan), `mealAnnouncements` (g/min) a vector that contains the announced meal CHO intakes inputs for the whole replay simulation, `bolus` (U/min) a vector that contains the bolus insulin input for the whole replay simulation, `basal` (U/min) a vector that contains the basal insulin input for the whole replay simulation, `time` (datetime) a vector that contains the time istants of current replay simulation, `timeIndex` is a number that defines the current time istant in the replay simulation, `dss` a structure containing the dss hyperparameters. For example, here's the default handler implemented in ReplayBG that provides the user with an example to start playing with:\n\n```MATLAB\nfunction [B, dss] = defaultBasalHandler(G, mealAnnouncements,bolus,basal,time,timeIndex,dss)\n% function  defaultBasalHandler(G,mealAnnouncements,bolus,basal,time,timeIndex,dss)\n% Implements the default basal rate controller: if G < 70, basal = 0,\n% otherwise basal = basal(1). \n%\n% ---------------------------------------------------------------------\n%\n% Copyright (C) 2022 Giacomo Cappon\n%\n% This file is part of ReplayBG.\n%\n% ---------------------------------------------------------------------\n\n    B = basal(1);\n    \n    %If G < 70...\n    if(G(timeIndex) < 70)\n        \n        %...set basal rate to 0.\n        B = 0;\n        \n    end\n    \nend\n```\n\n2. Call ReplayBG by changing the `basalSource` from `'data'` to `'dss'` and by providing the name of the handler just created: \n\n```MATLAB\n%Here, I suppose that data is the timetable used during identification\nreplayBG( ...\n  'replay', data, BW, scenario, saveName, ...\n  'basalSource','dss', ...\n  'basalHandler', 'defaultBasalHandler', ...\n  'plotMode',1, ...\n  'verbose',1, ...\n  'seed', 1, ...\n);\n```\n\nThree notes: \n\n- The handler function will be called for each integration time step (each \"simulated\" minute). This will slow down ReplayBG.\n- `dss` is a structure that serves as memory area and contains decision support related parameter passed to ReplayBG when you call the `replayBG` function (i.e., the parameters `BW`, `GT`, `CR`, `CF`, `bolusCalculatorHandlerParams`, `basalHandlerParams`, `mealGeneratorHandlerParams`, `hypoTreatmentsHandlerParams`, and `correctionBolusesHandlerParams`). As such you can use it to provide to your handler the parameter you need. Also, keep in mind that, serving as a memory area, it is possible to store values inside `dss` and `bolusCalculatorHandlerParams` and they will be available in the next call of the function (this is useful if you need to compute things like the insulin-on-board, or \"for how much did I suspend basal infusion?\").\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Use case 6: Test a meal generator with ReplayBG",
        "parent_header": [
          "Getting started",
          "Step 2: Use of ReplayBG for simulation",
          "Example of ReplayBG use for assessing your algorithm"
        ],
        "type": "Text_excerpt",
        "value": "Let's say that you want to test an algorithm that generates meals according to some strategy. \n\nYou have to follow two steps: \n1. First define a function that implements your strategy, namely the \"handler\". This function, as stated above, the function must have 4 outputs, i.e., the generated meal (g/min) actually consumed by the virtual subject, the generated meal announcement (g/min) that is usually used to compute the corresponding insulin bolus, the type of the meal (must be `'B'`,`'L'`,`'D'`, or `'S'`), and a structure containing the dss hyperparameter. The function must have 8 inputs, i.e., `G` (mg/dl) a vector as long the simulation length containing all the simulated glucose concentrations up to `timeIndex` (the other values are nan), `meal` (g/min) a vector that contains the meal CHO intakes inputs for the whole replay simulation, `mealAnnouncements` (g/min) a vector that contains the announced meal CHO intakes inputs for the whole replay simulation, `bolus` (U/min) a vector that contains the bolus insulin input for the whole replay simulation, `basal` (U/min) a vector that contains the basal insulin input for the whole replay simulation, `time` (datetime) a vector that contains the time istants of current replay simulation, `timeIndex` is a number that defines the current time istant in the replay simulation, `dss` a structure containing the dss hyperparameters. For example, here's the default handler implemented in ReplayBG that provides the user with an example to start playing with:\n\n```MATLAB\nfunction [C, MA, type, dss] = defaultMealGeneratorHandler(G, meal, mealAnnouncements,bolus,basal,time,timeIndex,dss)\n% function  defaultMealGeneatorHandler(G,meal,mealAnnouncements,bolus,basal,time,timeIndex,dss)\n% Implements the default meal generation policy: put a snack meal of 50g of CHO\n% in the first instant and announce only 40g.\n%\n% ---------------------------------------------------------------------\n%\n% Copyright (C) 2022 Giacomo Cappon\n%\n% This file is part of ReplayBG.\n%\n% ---------------------------------------------------------------------\n    \n    %Default output values\n    C = 0;\n    MA = 0;\n    type = '';\n    \n    %If this is the first time instant...\n    if(timeIndex == 1)\n        \n        %...generate a snack meal of 50g and announce just 40g.\n        C = 50;\n        MA = 40;\n        type = 'S';\n        \n    end\n    \nend\n```\n\n2. Call ReplayBG by changing the `mealSource` from `'data'` to `'generated'` and by providing the name of the handler just created: \n\n```MATLAB\n%Here, I suppose that data is the timetable used during identification\nreplayBG( ...\n  'replay', data, BW, scenario, saveName, ...\n  'mealSource','generated', ...\n  'mealGeneratorHandler', 'defaultMealGeneratorHandler', ...\n  'plotMode',1, ...\n  'verbose',1, ...\n  'seed', 1, ...\n);\n```\n\nThree notes: \n\n- The handler function will be called for each integration time step (each \"simulated\" minute). This will slow down ReplayBG.\n- `dss` is a structure that serves as memory area and contains decision support related parameter passed to ReplayBG when you call the `replayBG` function (i.e., the parameters `BW, `GT`, `CR`, `CF`, `bolusCalculatorHandlerParams`, `basalHandlerParams`, `mealGeneratorHandlerParams`, `hypoTreatmentsHandlerParams`, and `correctionBolusesHandlerParams`). As such you can use it to provide to your handler the parameter you need. Also, keep in mind that, serving as a memory area, it is possible to store values inside `dss` and `bolusCalculatorHandlerParams` and they will be available in the next call of the function (this is useful if you need to compute things like the insulin-on-board, or \"when did I eat last time?\").\n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    },
    {
      "confidence": 1,
      "result": {
        "original_header": "Results",
        "parent_header": [
          "Getting started"
        ],
        "type": "Text_excerpt",
        "value": "Results are saved in the `results/` folder of the replay-bg folder, specifically:\n- `results/distributions/`: contains the identified ReplayBG model parameter distributions obtained via MCMC;\n- `results/logs/`: contains .txt files that log the command window output of ReplayBG. NB: .txt files will be empty if verbose = 0;\n- `results/mcmcChains/`: contains the MCMC chains, for each unknown parameter, obtained in each MCMC run;\n- `results/modelParameters/`: contains the model parameters identified using MCMC. Known model parameters are fixed to population values obtained from the literature. Unknown model parameters estimates are in draws.<modelParameterName>.samples;\n- `results/workspaces/`: contains the core ReplayBG variables and data used in a specific ReplayBG call plus a structure called `analysis` that contains useful metrics evaluated on the simulated glucose trace (this uses the [AGATA toolbox](https://github.com/gcappon/agata)). Name of the files start with `'identification'` or `'replay'` depending on how you called the `replayBG` function. \n"
      },
      "source": "https://raw.githubusercontent.com/gcappon/replay-bg/master/README.md",
      "technique": "header_analysis"
    }
  ]
}